    di
    jp start
    db 0xff,0xff,0xff,0xff,0xc3,0x23,0x00,0xff,0xff,0xff,0xff,0xff
    db 0xc3,0x1b,0x00,0xff,0xff,0xff,0xff,0xff,0xc3,0x2e,0x00
;lbl_001b:
rxa:
    call lbl_002e
    db 0x28,0xfb
    in a,(0x81)
    ret
    push af
    in a,(0x80)
    db 0xcb,0x4f,0x28,0xfa
    db 0xf1,0xd3,0x81,0xc9
lbl_002e:
    in a,(0x80)
    db 0xe6,0x01,0xfe,0x00,0xc9
;lbl_0035:
print:
    ld a,(hl)
    or a
    ret z
    rst 8
    inc hl
    jr print
    ret
start:
    ld hl,0x200f
    ld sp,hl
    ld a,0x95
    out (0x80),a
    ld hl,0x7e
    call print
    ld a,(0x2000)
    cp 0x59
    jr nz,coldstart
    ld hl,0x99
    call print
corw:
    call rxa
    and 0xdf
    cp 0x43
    jr nz,checkwarm
    rst 8
    db 0x3e,0x0d
    rst 8
    db 0x3e,0x0a
    rst 8
coldstart:
    ld a,0x59
    db 0x32,0x00,0x20
    db 0xc3,0x00,0x01
checkwarm:
    cp 0x57
    jr nz,corw
    db 0xcf,0x3e,0x0d,0xcf,0x3e,0x0a,0xcf,0xc3,0x03,0x01,0x0c
    db 'Z80 SBC By Grant Searle\r\n'
    db 0x00,0x0d,0x0a,0x43,0x6f,0x6c,0x64,0x20
    db 0x6f,0x72,0x20,0x77,0x61,0x72,0x6d,0x20,0x73,0x74,0x61,0x72,0x74,0x20,0x28,0x43
    db 0x20,0x6f,0x72,0x20,0x57,0x29,0x3f,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0xc3,0x06,0x01,0xc3,0xa4,0x01,0xdd,0x21,0x00,0x00,0xc3,0x11,0x01,0xb7,0x09,0x2d
    db 0x11,0x21,0x10,0x20,0xf9,0xc3,0x4c,0x1d,0x11,0xde,0x03,0x06,0x63,0x21,0x10,0x20
copy:
    ld a,(de)
    ld (hl),a
    inc hl
    inc de
    dec b
    jp nz,copy
    ld sp,hl
    call clreg
    db 0xcd,0xad,0x0b
    db 0x32,0xba,0x20
    db 0x32,0x09,0x21
msize:
    ld hl,0x01f3
    call prs
    call prompt
    call getchr
    or a
    jp nz, tstmem
    ld hl,0x216d
mloop:
    inc hl
    ld a,h
    or l
    jp z,settop
    ld a,(hl)
    ld b,a
    cpl
    ld (hl),a
    cp (hl)
    ld (hl),b
    jp z,mloop
    jp settop
tstmem:
    call atoh
    or a
    db 0xc2,0xad,0x04
    ex de, hl
    dec hl
    ld a, 0xd9
    ld b,(hl)
    ld (hl),a
    cp (hl)
    ld (hl),b
    jp nz,msize
settop:
    dec hl
    db 0x11,0x6c,0x21
    call cpdehl
    db 0xda,0x35,0x01,0x11,0xce,0xff,0x22,0xbf,0x20,0x19,0x22,0x6a,0x20
    call clrptr
    db 0x2a,0x6a,0x20,0x11,0xef,0xff,0x19,0x11,0x09,0x21,0x7d,0x93,0x6f
    db 0x7c,0x9a,0x67,0xe5,0x21,0xbc,0x01
    db 0xcd,0x4b,0x12
    db 0xe1
    db 0xcd,0xee,0x18
    db 0x21,0xad
    db 0x01
    call prs
    db 0x31,0x76,0x20
    call clreg
db 0xc3,0xf8,0x04,0x20
db 'Bytes free\r\n'
db 0x00,0x00
db 'Z80 BASIC'
db 0x20,0x56,0x65,0x72,0x20,0x34,0x2e,0x37,0x62,0x0d,0x0a
db 'Copyright',0x20,0x28,0x43,0x29
db ' 1978 by Microsoft\r\n',0,0
db 'Memory top',0
db 0x63,0x17
db 0x27,0x18    ;int
db 0x79,0x17    ;abs
db 0x13,0x20    ;usr
db 0x0b,0x11    ;fre
dw inp
db 0x39,0x11    ;pos
db 0xed,0x19    ;sqr
db 0xcc,0x1a    ;rnd
db 0x08,0x16    ;log
db 0x3b,0x1a    ;exp
dw cos
dw sin
db 0xa8,0x1b    ;tan
db 0xbd,0x1b    ;atn
dw peek
db 0x28,0x1c    ;deek
db 0x61,0x20    ;point
db 0xbd,0x13    ;len
db 0xd5,0x11    ;str
db 0x57,0x14    ;val
db 0xcc,0x13    ;asc
db 0xdd,0x13    ;chr
db 0x4a,0x1c    ;hex
db 0xdd,0x1c    ;bin
db 0xed,0x13    ;left
db 0x1d,0x14    ;right
db 0x27,0x14    ;mid
db 0xc5,'ND'
db 0xc6,'OR'
db 0xce,'EXT'
db 0xc4,'ATA'
db 0xc9,'NPUT'
db 0xc4,'IM'
db 0xd2,'EAD'
db 0xcc,'ET'
db 0xc7,'OTO'
db 0xd2,'UN'
db 0xc9,'F'
db 0xd2,'ESTORE'
db 0xc7,'OSUB'
db 0xd2,'ETURN'
db 0xd2,'EM'
db 0xd3,0x54,0x4f,0x50,0xcf,0x55,0x54,0xcf,0x4e,0xce,0x55,0x4c,0x4c,0xd7,0x41
db 0x49,0x54,0xc4,0x45,0x46,0xd0,0x4f,0x4b,0x45,0xc4,0x4f,0x4b,0x45,0xd3,0x43,0x52
db 0x45,0x45,0x4e,0xcc,0x49,0x4e,0x45,0x53,0xc3,0x4c,0x53,0xd7,0x49,0x44,0x54,0x48
db 0xcd,0x4f,0x4e
db 0x49,0x54,0x4f,0x52,0xd3,0x45,0x54,0xd2,0x45,0x53,0x45,0x54,0xd0
db 0x52,0x49,0x4e,0x54,0xc3,0x4f,0x4e,0x54,0xcc,0x49,0x53,0x54,0xc3,0x4c,0x45,0x41
db 0x52,0xc3,0x4c,0x4f,0x41,0x44,0xc3,0x53,0x41,0x56,0x45,0xce,0x45,0x57,0xd4,0x41
db 0x42,0x28,0xd4,0x4f,0xc6,0x4e,0xd3,0x50,0x43,0x28,0xd4,0x48,0x45,0x4e,0xce,0x4f
db 0x54,0xd3,0x54,0x45,0x50,0xab,0xad,0xaa,0xaf,0xde,0xc1,0x4e,0x44,0xcf,0x52,0xbe
db 0xbd,0xbc,0xd3,0x47,0x4e
db 0xc9
db 0x4e,0x54,0xc1,0x42,0x53,0xd5,0x53,0x52,0xc6,0x52
db 0x45
db 0xc9
db 0x4e,0x50,0xd0,0x4f,0x53,0xd3,0x51,0x52,0xd2,0x4e,0x44,0xcc,0x4f,0x47
db 0xc5,0x58,0x50,0xc3,0x4f,0x53,0xd3,0x49,0x4e,0xd4,0x41,0x4e,0xc1,0x54,0x4e,0xd0
db 0x45,0x45,0x4b,0xc4,0x45,0x45,0x4b,0xd0,0x4f,0x49,0x4e,0x54,0xcc,0x45,0x4e,0xd3
db 0x54,0x52,0x24,0xd6,0x41,0x4c,0xc1,0x53,0x43,0xc3,0x48,0x52,0x24,0xc8,0x45,0x58
db 0x24,0xc2,0x49,0x4e,0x24,0xcc,0x45,0x46,0x54,0x24
db 0xd2,'IGHT$'
db 0xcd,'ID$'
db 0x80
dw pend
db 0x4c,0x08    ;for
db 0x27,0x0d    ;next
db 0x9c,0x0a    ;data
db 0x2e,0x0c    ;input
db 0x63,0x0f    ;dim
db 0x5d,0x0c    ;read
dw let
dw goto
dw run
db 0x2b,0x0b    ;if
dw restor
dw gosub
dw return
dw rem
dw stop
dw pout
db 0x0d,0x0b    ;on
dw null
dw wait
db 0x41,0x11    ;def
dw poke
db 0x33,0x1c    ;doke
dw rem
db 0x19,0x1c    ;lines
dw cls
dw width
db 0x49,0x1d    ;monitr
db 0x64,0x20    ;pset
db 0x67,0x20    ;reset
db 0x4f,0x0b    ;print
dw cont
dw list
dw clear
dw rem
dw rem
dw new
db 0x79
db 0xd5,0x18,0x79,0x09,0x15,0x7c,0x47,0x16,0x7c,0xa8,0x16,0x7f,0xf6,0x19,0x50,0xbc
db 0x0e,0x46,0xbb,0x0e
errors:
    db 'NFSNRG',0x4f,0x44,0x46,0x43,0x4f,0x56
db 0x4f,0x4d,0x55,0x4c,0x42,0x53,0x44,0x44,0x2f,0x30,0x49,0x44,0x54,0x4d,0x4f,0x53
db 0x4c,0x53,0x53,0x54,0x43,0x4e,0x55,0x46,0x4d,0x4f,0x48,0x58,0x42,0x4e,0xc3,0xa4
db 0x01,0xc3,0xcc,0x09,0xd3,0x00
    ret
db 0xd6,0x00,0x6f,0x7c,0xde,0x00,0x67,0x78,0xde
db 0x00,0x47,0x3e,0x00
    ret
db 0x00,0x00,0x00,0x35,0x4a,0xca,0x99,0x39,0x1c,0x76,0x98
db 0x22,0x95,0xb3,0x98,0x0a,0xdd,0x47,0x98,0x53,0xd1,0x99,0x99,0x0a,0x1a,0x9f,0x98
db 0x65,0xbc
db 0xcd,0x98,0xd6
db 0x77,0x3e,0x98,0x52,0xc7,0x4f,0x80,0xdb,0x00
    ret
db 0x01
db 0xff,0x1c,0x00,0x00,0x14,0x00,0x14,0x00,0x00,0x00,0x00,0x00,0xc3,0xf2,0x06,0xc3
db 0x00,0x00,0xc3,0x00,0x00,0xc3,0x00,0x00,0x6d,0x21,0xfe,0xff,0x0a,0x21,0x20,0x45
db 0x72,0x72,0x6f,0x72,0x00,0x20,0x69,0x6e,0x20,0x00,0x4f,0x6b,0x0d,0x0a,0x00,0x00
db 0x42,0x72,0x65,0x61,0x6b,0x00,0x21,0x04,0x00,0x39,0x7e,0x23,0xfe,0x81,0xc0,0x4e
db 0x23,0x46,0x23,0xe5,0x69,0x60,0x7a,0xb3,0xeb,0xca,0x70,0x04,0xeb
    call cpdehl
    db 0x01,0x0d,0x00,0xe1,0xc8,0x09,0xc3,0x5a,0x04
;lbl_0479:
movup:
    call enfmem
movstr:
    db 0xc5,0xe3,0xc1
movlp:
    call cpdehl
    ld a,(hl)
    ld (bc),a
    ret z
    db 0x0b,0x2b
    jp movlp
;lbl_048a:
chkstk:
    push hl
    db 0x2a,0xea,0x20,0x06,0x00
    db 0x09,0x09,0x3e
;lbl_0493:
enfmem:
    db 0xe5,0x3e,0xd0,0x95,0x6f,0x3e,0xff,0x9c,0xda,0xa2,0x04,0x67,0x39
    db 0xe1,0xd8,0x1e,0x0c,0xc3,0xc1,0x04,0x2a,0xd9,0x20,0x22,0x6c,0x20,0x1e,0x02,0x01
    db 0x1e,0x14,0x01,0x1e,0x00,0x01,0x1e,0x12,0x01,0x1e,0x22,0x01,0x1e,0x0a
    db 0x01
    ld e,0x18
;error:
    call clreg
    db 0x32,0x55,0x20
    db 0xcd,0xa0,0x0b   ;call sttlin
    ld hl,errors
    ld d,a
    ld a,0x3f
    call outc
    add hl,de
    ld a,(hl)
    call outc
    call getchr
    call outc
    db 0x21,0x3e,0x04
;errin
    call prs
    db 0x2a,0x6c,0x20
    db 0x11,0xfe,0xff
    call cpdehl
    db 0xca,0x11,0x01
    db 0x7c,0xa5,0x3c,0xc4,0xe6,0x18,0x3e,0xc1
;prntok:
    xor a
    db 0x32,0x55,0x20
    db 0xcd,0xa0,0x0b   ;call sttlin
    db 0x21
    db 0x4a,0x04
    call prs
getcmd:
    ld hl,0xffff
    db 0x22,0x6c,0x20
    call getlin
    jp c,getcmd
    call getchr
    inc a
    dec a
    jp z,getcmd
    push af
    call atoh
    push de
    call crunch
    ld b,a
    pop de
    pop af
    jp nc,excute
    push de
    push bc
    xor a
    db 0x32,0xdc,0x20
    call getchr
    or a
    push af
    call srchln
    db 0xda,0x3e,0x05,0xf1,0xf5,0xca,0x72,0x0a,0xb7,0xc5,0xd2
    db 0x55,0x05,0xeb,0x2a,0xe6,0x20
sftprg:
    ld a,(de)
    ld (bc),a
    inc bc
    inc de
    call cpdehl
    jp nz,sftprg
    ld h,b
    ld l,c
    db 0x22,0xe6,0x20,0xd1,0xf1,0xca,0x7c,0x05,0x2a,0xe6,0x20,0xe3,0xc1,0x09
    db 0xe5
    call movup
    pop hl
    db 0x22,0xe6,0x20,0xeb,0x74,0xd1,0x23,0x23,0x73,0x23,0x72
    db 0x23,0x11,0x71,0x20,0x1a,0x77,0x23,0x13
    or a
    db 0xc2,0x74,0x05
setptr:
    call runfst
    inc hl
    ex de,hl
ptrlp:
    ld h,d
    ld l,e
    ld a,(hl)
    inc hl
    or (hl)
    jp z,getcmd
    inc hl
    inc hl
    inc hl
    xor a
fndend:
    cp (hl)
    inc hl
    jp nz,fndend
    ex de,hl
    ld (hl),e
    inc hl
    ld (hl),d
    jp ptrlp
;lbl_0599:
srchln:
    ld hl,(0x206e)
;lbl_059c:
srchlp:
    ld b,h
    ld c,l
    ld a,(hl)
    inc hl
    or (hl)
    dec hl
    ret z
    inc hl
    inc hl
    ld a,(hl)
    inc hl
    ld h,(hl)
    ld l,a
    call cpdehl
    ld h,b
    ld l,c
    ld a,(hl)
    inc hl
    ld h,(hl)
    ld l,a
    ccf
    ret z
    ccf
    ret nc
    jp srchlp
;lbl_05b9:
new:
    ret nz
;lbl_05ba:
clrptr:
    db 0x2a,0x6e,0x20
    xor a
    ld (hl),a
    inc hl
    ld (hl),a
    inc hl
    db 0x22,0xe6,0x20
;lbl_05c5:
runfst:
    db 0x2a,0x6e,0x20
    dec hl
;lbl_05c9
intvar:
    db 0x22,0xde,0x20
    db 0x2a,0xbf,0x20
    db 0x22,0xd3,0x20
    xor a
    call restor
    db 0x2a,0xe6,0x20,0x22,0xe8,0x20,0x22,0xea,0x20
;lbl_05df:
clreg:
    db 0xc1
    db 0x2a,0x6a,0x20,0xf9,0x21,0xc3,0x20,0x22,0xc1,0x20
    db 0xaf,0x6f,0x67,0x22,0xe4,0x20
    db 0x32,0xdb,0x20,0x22,0xee,0x20,0xe5,0xc5,0x2a,0xde,0x20,0xc9
;lbl_05fc:
prompt:
    db 0x3e,0x3f
    call outc
    ld a,0x20
    call outc
    db 0xc3,0x5e,0x20
;lbl_0609:
crunch:
    xor a
    db 0x32,0xbe,0x20,0x0e,0x05,0x11
    db 0x71,0x20,0x7e,0xfe,0x20,0xca,0x91,0x06,0x47,0xfe,0x22,0xca,0xb1,0x06,0xb7,0xca
    db 0xb8,0x06,0x3a,0xbe,0x20,0xb7,0x7e,0xc2,0x91,0x06,0xfe,0x3f,0x3e,0x9e,0xca,0x91
    db 0x06,0x7e,0xfe,0x30,0xda,0x3c,0x06,0xfe,0x3c,0xda,0x91,0x06,0xd5,0x11,0x35,0x02
    db 0xc5,0x01,0x8d,0x06,0xc5,0x06,0x7f,0x7e,0xfe,0x61,0xda,0x55,0x06,0xfe,0x7b,0xd2
    db 0x55,0x06,0xe6,0x5f,0x77,0x4e,0xeb,0x23,0xb6,0xf2,0x57,0x06,0x04,0x7e,0xe6,0x7f
    db 0xc8,0xb9,0xc2,0x57,0x06,0xeb,0xe5,0x13,0x1a,0xb7,0xfa,0x89,0x06,0x4f,0x78,0xfe
    db 0x88
    jp nz,nospc
    call getchr
    dec hl
nospc:
    inc hl
    ld a,(hl)
    cp 0x61
    db 0xda,0x81,0x06,0xe6
    db 0x5f,0xb9,0xca,0x67,0x06,0xe1,0xc3,0x55,0x06,0x48,0xf1,0xeb,0xc9,0xeb,0x79,0xc1
    db 0xd1,0x23,0x12,0x13,0x0c,0xd6,0x3a,0xca,0x9f,0x06,0xfe,0x49,0xc2,0xa2,0x06,0x32
    db 0xbe,0x20,0xd6,0x54,0xc2,0x12,0x06,0x47,0x7e,0xb7,0xca,0xb8,0x06,0xb8,0xca,0x91
    db 0x06,0x23,0x12,0x0c,0x13,0xc3,0xa8,0x06,0x21,0x70,0x20,0x12,0x13,0x12,0x13,0x12
    db 0xc9,0x3a,0x54,0x20,0xb7,0x3e,0x00,0x32,0x54,0x20,0xc2,0xd5,0x06,0x05,0xca,0xf2
    db 0x06
    call outc
    ld a,5
    dec hl
    db 0xca,0xe9,0x06
    ld a,(hl)
    call outc
    db 0xc3,0xfb
    db 0x06,0x05,0x2b
    call outc
    db 0xc2,0xfb,0x06
    call outc
    db 0xcd,0xad,0x0b
    jp getlin
;lbl_06f2:
getlin:
    db 0x21,0x71,0x20
    ld b,1
    xor a
    ld (0x2054),a
morinp:
    call clotst
    ld c,a
    cp 0x7f
    db 0xca,0xc1,0x06,0x3a,0x54,0x20,0xb7
    jp z,proces
    ld a,0
    call outc
    xor a
    db 0x32,0x54,0x20
proces:
    ld a,c
    cp 7
    db 0xca,0x58,0x07
    cp 3
    db 0xcc,0xad,0x0b,0x37
    db 0xc8,0xfe,0x0d,0xca,0xa8,0x0b,0xfe,0x15,0xca,0xec,0x06,0xfe,0x40,0xca,0xe9,0x06
    db 0xfe,0x5f,0xca,0xe1,0x06,0xfe,0x08,0xca,0xe1,0x06,0xfe,0x12,0xc2,0x53,0x07,0xc5
    db 0xd5,0xe5,0x36,0x00
    db 0xcd,0x5d,0x1d
    db 0x21,0x71,0x20
    call prs
    pop hl
    pop de
    pop bc
    db 0xc3,0xfb,0x06
    cp 0x20
    db 0xda,0xfb,0x06,0x78,0xfe,0x49,0x3e,0x07,0xd2,0x6d,0x07
    db 0x79,0x71,0x32,0xdc,0x20,0x23,0x04
outit:
    call outc
    jp morinp
;outnbs:
    call outc
    ld a,8
    jp outit
;lbl_0775:
cpdehl:
    ld a,h
    sub d
    ret nz
    ld a,l
    sub e
    ret
;lbl_077b:
chksyn:
    ld a,(hl)
    ex (sp),hl
    db 0xbe,0x23,0xe3
    db 0xca,0x05,0x09,0xc3,0xad,0x04
;lbl_0786:
outc:
    push af
    db 0x3a,0x55,0x20,0xb7,0xc2,0x80,0x12,0xf1,0xc5
    db 0xf5,0xfe,0x20,0xda,0xaa,0x07,0x3a,0x52,0x20,0x47,0x3a,0xbb,0x20,0x04,0xca,0xa6
    db 0x07,0x05,0xb8,0xcc,0xad,0x0b,0x3c,0x32,0xbb,0x20,0xf1,0xc1
    db 0xcd,0x46,0x1d   ;call monout?
    ret
;lbl_07b0:
clotst:
    db 0xcd,0x0a,0x1c   ;call getinp?
    and 0x7f
    cp 0x0f
    db 0xc0,0x3a,0x55,0x20,0x2f,0x32,0x55,0x20
    xor a
    ret
;lbl_07c1:
list:
    call atoh
    ret nz
    pop bc
    call srchln
    push bc
    call setlin
listlp:
    pop hl
    ld c,(hl)
    inc hl
    ld b,(hl)
    inc hl
    ld a,b
    or c
    db 0xca,0xf8,0x04
    call count
    call tstbrk
    push bc
    db 0xcd,0xad,0x0b
    db 0x5e,0x23,0x56,0x23,0xe5,0xeb
    db 0xcd,0xee,0x18
    db 0x3e,0x20,0xe1
lstlp2:
    call outc
lstlp3:
    ld a,(hl)
    or a
    inc hl
    jp z,listlp
    jp p,lstlp2
    sub 0x7f
    ld c,a
    ld de,0x236
    ld a,(de)
    inc de
    or a
    db 0xf2,0xff,0x07,0x0d,0xc2,0xff,0x07
outwrd:
    and 0x7f
    call outc
    ld a,(de)
    inc de
    or a
    jp p,outwrd
    jp lstlp3
;lbl_0817:
setlin:
    db 0xe5,0x2a,0x58,0x20,0x22,0x56,0x20,0xe1,0xc9
;lbl_0820:
count:
    push hl
    db 0xd5,0x2a,0x56,0x20,0x11,0xff,0xff,0xed,0x5a,0x22,0x56,0x20,0xd1,0xe1,0xf0
    db 0xe5,0x2a,0x58,0x20,0x22,0x56,0x20
    db 0xcd,0x0a,0x1c
    db 0xfe,0x03,0xca,0x43,0x08,0xe1
    db 0xc3,0x20,0x08,0x2a,0x58,0x20,0x22,0x56,0x20,0xc3,0xa7,0x01,0x3e,0x64,0x32,0xdb
    db 0x20
    call let
    pop bc
    push hl
    call data
    db 0x22,0xd7,0x20,0x21,0x02,0x00,0x39

    db 0xcd,0x5a,0x04

    db 0xd1,0xc2,0x7c,0x08,0x09,0xd5,0x2b,0x56,0x2b,0x5e,0x23,0x23,0xe5
    db 0x2a,0xd7,0x20
    call cpdehl
    db 0xe1,0xc2,0x60,0x08,0xd1,0xf9,0xeb,0x0e,0x08
    call chkstk
    db 0xe5,0x2a,0xd7,0x20,0xe3,0xe5,0x2a,0x6c,0x20,0xe3

    db 0xcd,0x75,0x0d
    call chksyn
    db 0xa6
    db 0xcd,0x72,0x0d
    push hl
    db 0xcd,0xa0,0x17
    pop hl
    push bc
    db 0xd5,0x01,0x00,0x81
    db 0x51,0x5a,0x7e,0xfe,0xab
    db 0x3e,0x01,0xc2,0xb8,0x08
    call getchr
    db 0xcd,0x72,0x0d
    push hl
    db 0xcd,0xa0,0x17
    db 0xcd,0x54,0x17
    pop hl
;savstp:
    push bc
    push de
    push af
    inc sp
    push hl
    db 0x2a,0xde,0x20
    ex (sp),hl
    db 0x06,0x81,0xc5,0x33
;runcnt:
    call tstbrk
    db 0x22,0xde,0x20,0x7e,0xfe,0x3a,0xca,0xe5
    db 0x08,0xb7,0xc2,0xad,0x04,0x23,0x7e,0x23,0xb6,0xca,0x57,0x09,0x23,0x5e,0x23,0x56
    db 0xeb,0x22,0x6c,0x20,0xeb
excute:
    call getchr
    db 0x11,0xc5,0x08,0xd5,0xc8,0xd6,0x80,0xda
    db 0xb3,0x0a,0xfe,0x25,0xd2,0xad,0x04
    rlca
    ld c,a
    ld b,0
    ex de,hl
    db 0x21,0x55,0x03
    add hl,bc
    ld c,(hl)
    inc hl
    ld b,(hl)
    push bc
    ex de,hl
;lbl_0905:
getchr:
    inc hl
    ld a,(hl)
    cp 0x3a
    ret nc
    cp 0x20
    jp z,getchr
    cp 0x30
    ccf
    inc a
    dec a
    ret
;lbl_0915:
restor:
    ex de,hl
    db 0x2a,0x6e,0x20
    db 0xca,0x2a,0x09
    ex de,hl
    call atoh
    push hl
    call srchln
    ld h,b
    ld l,c
    pop de
    db 0xd2,0x72,0x0a
;restnl:
    dec hl
;updata:
    db 0x22,0xec,0x20
    ex de,hl
    ret
;lbl_0930:
tstbrk:
    rst 0x18
    ret z
    rst 0x10
    cp 0x1b
    db 0x28,0x11
    cp 3
    db 0x28,0x0d
    cp 0x13
    ret nz
stall:
    rst 0x10
    cp 0x11
    ret z
    cp 3
    db 0x28,0x07,0x18,0xf6
brk:
    ld a,0xff
    ld (0x205d),a
;lbl_094d:
stop:
    db 0xc0,0xf6
;lbl_094f:
pend:
    ret nz
    db 0x22,0xde,0x20
    db 0x21
inpbrk:
    or 0xff
    pop bc
endprg:
    ld hl,(0x206c)
    push af
    ld a,l
    and h
    inc a
    db 0xca,0x6a,0x09
    db 0x22,0xe2,0x20,0x2a,0xde,0x20,0x22,0xe4,0x20
nolin:
    db 0xaf,0x32,0x55,0x20
    db 0xcd,0xa0,0x0b   ;call stllin
    pop af
    db 0x21,0x50,0x04
    ;jp nz,errin
    db 0xc2,0xe1,0x04
    db 0xc3,0xf8,0x04
;lbl_097b:
cont:
    db 0x2a,0xe4,0x20,0x7c,0xb5
    db 0x1e,0x20,0xca,0xc1,0x04,0xeb,0x2a,0xe2,0x20,0x22,0x6c,0x20,0xeb,0xc9
;lbl_098e:
null:
    call getint
    ret nz
    db 0x32,0x51,0x20
    ret
accsum:
    push hl
    db 0x2a,0x5a,0x20,0x06,0x00,0x4f,0x09,0x22,0x5a
    db 0x20,0xe1,0xc9
;lbl_09a3:
chkltr:
    ld a,(hl)
    cp 0x41
    ret c
    cp 0x5b
    ccf
    ret
;lbl_09ab:
fpsint:
    call getchr
;lbl_09ae:
posint:
    db 0xcd,0x72,0x0d
depint:
    db 0xcd,0x54,0x17
    db 0xfa,0xcc,0x09
;lbl_09b7:
deint:
    db 0x3a,0xf7,0x20
    db 0xfe,0x90
    db 0xda,0xfc,0x17,0x01
    db 0x80,0x90,0x11,0x00,0x00,0xe5
    db 0xcd,0xcf,0x17
    db 0xe1,0x51,0xc8,0x1e,0x08,0xc3,0xc1
    db 0x04
;lbl_09d1:
atoh:
    dec hl
;lbl_09d2:
getln:
    ld de,0
gtlnlp:
    call getchr
    ret nc
    push hl
    push af
    ld hl,0x1998
    call cpdehl
    db 0xda
    db 0xad,0x04,0x62,0x6b
    add hl,de
    add hl,hl
    add hl,de
    add hl,hl
    pop af
    sub 0x30
    ld e,a
    ld d,0
    add hl,de
    ex de,hl
    pop hl
    jp gtlnlp
;lbl_09f6:
clear:
    db 0xca,0xc9,0x05
    call posint
    dec hl
    call getchr
    db 0xe5,0x2a,0xbf,0x20,0xca,0x19,0x0a,0xe1
    call chksyn
    inc l
    push de
    call posint
    dec hl
    call getchr
    db 0xc2,0xad,0x04
    ex (sp),hl
    ex de,hl
stored:
    db 0x7d,0x93,0x5f,0x7c,0x9a,0x57,0xda
    db 0xa2,0x04,0xe5,0x2a,0xe6,0x20,0x01,0x28,0x00,0x09
    call cpdehl
    db 0xd2,0xa2,0x04
    db 0xeb,0x22,0x6a,0x20,0xe1,0x22,0xbf,0x20,0xe1,0xc3,0xc9,0x05
;lbl_0a3c
run:
    db 0xca,0xc5,0x05
    call intvar
    db 0x01,0xc5,0x08
    db 0xc3,0x58,0x0a
;lbl_0a48
gosub:
    ld c,3
    call chkstk
    pop bc
    push hl
    push hl
    db 0x2a,0x6c,0x20,0xe3,0x3e,0x8c,0xf5,0x33
runlin:
    push bc
;lbl_0a59:
goto:
    call atoh
    call rem
    push hl
    ld hl,(0x206c)
    call cpdehl
    pop hl
    inc hl
    call c,srchlp
    call nc,srchln
    ld h,b
    ld l,c
    dec hl
    ret c
ulerr:
    ld e,0xe
    db 0xc3,0xc1,0x04
;lbl_0a77:
return:
    ret nz
    ld d,0xff
    db 0xcd,0x56,0x04   ;call bakstk
    db 0xf9,0xfe,0x8c
    db 0x1e,0x04,0xc2,0xc1,0x04,0xe1,0x22,0x6c,0x20,0x23,0x7c,0xb5,0xc2,0x96,0x0a,0x3a
    db 0xdc,0x20,0xb7,0xc2,0xf7,0x04,0x21,0xc5,0x08,0xe3,0x3e,0xe1
;lbl_0a9c:
data:
    db 0x01,0x3a
;lbl_0a9e:
rem:
    ld c,0
    db 0x06,0x00,0x79,0x48,0x47,0x7e,0xb7,0xc8,0xb8,0xc8,0x23,0xfe,0x22,0xca,0xa2,0x0a
    db 0xc3,0xa5,0x0a
;lbl_0ab3:
let:
    db 0xcd,0x68,0x0f   ;call getvar
    call chksyn
    or h
    push de
    db 0x3a,0xbd,0x20
    push af
    db 0xcd,0x84,0x0d   ;call eval
    pop af
    db 0xe3,0x22,0xde,0x20,0x1f
    db 0xcd,0x77,0x0d   ;call chktyp
    db 0xca,0x06,0x0b
letstr:
    db 0xe5,0x2a
    db 0xf4,0x20,0xe5,0x23,0x23,0x5e,0x23,0x56,0x2a,0x6e,0x20
    call cpdehl
    db 0xd2,0xf5
    db 0x0a,0x2a,0x6a,0x20
    call cpdehl
    db 0xd1,0xd2,0xfd,0x0a,0x21,0xcf,0x20
    call cpdehl
    db 0xd2,0xfd,0x0a,0x3e,0xd1
    db 0xcd,0xac,0x13
    ex de,hl
    db 0xcd,0xe5,0x11
    db 0xcd,0xac,0x13
    pop hl
    db 0xcd,0xaf,0x17
    db 0xe1,0xc9,0xe5
    db 0xcd,0xac,0x17
    db 0xd1,0xe1,0xc9
    db 0xcd,0xd3,0x14
    ld a,(hl)
    ld b,a
    cp 0x8c
    db 0xca,0x1c,0x0b
    call chksyn
    adc a,b
    db 0x2b,0x4b,0x0d,0x78,0xca
    db 0xed,0x08
    call getln
    cp 0x2c
    db 0xc0,0xc3,0x1d,0x0b
    db 0xcd,0x84,0x0d
    db 0x7e,0xfe
    db 0x88,0xca,0x39,0x0b
    call chksyn
    db 0xa9,0x2b
    db 0xcd,0x75,0x0d
    db 0xcd,0x54,0x17,0xca
    db 0x9e,0x0a
    call getchr
    db 0xda,0x59,0x0a
    db 0xc3,0xec,0x08,0x2b
    call getchr
    db 0xca
    db 0xad,0x0b,0xc8,0xfe,0xa5,0xca,0xe0,0x0b,0xfe,0xa8,0xca,0xe0,0x0b,0xe5,0xfe,0x2c
    db 0xca,0xc9,0x0b,0xfe,0x3b,0xca,0x03,0x0c,0xc1
    db 0xcd,0x84,0x0d
    db 0xe5,0x3a,0xbd,0x20
    db 0xb7,0xc2,0x99,0x0b
    db 0xcd,0xf9,0x18
    db 0xcd,0x09,0x12
    db 0x36,0x20,0x2a,0xf4,0x20,0x34
    db 0x2a,0xf4,0x20,0x3a,0x52,0x20,0x47,0x04,0xca,0x95,0x0b,0x04,0x3a,0xbb,0x20,0x86
    db 0x3d,0xb8,0xd4,0xad,0x0b
    db 0xcd,0x4e,0x12
    xor a
    db 0xc4,0x4e,0x12,0xe1,0xc3,0x4b,0x0b
    db 0x3a,0xbb,0x20,0xb7,0xc8,0xc3,0xad,0x0b,0x36,0x00,0x21,0x70,0x20,0x3e,0x0d
    call outc
    ld a,0xa
    call outc
    db 0xaf,0x32,0xbb,0x20,0x3a,0x51,0x20,0x3d,0xc8
    db 0xf5,0xaf
    call outc
    db 0xf1,0xc3,0xbe,0x0b,0x3a,0x53,0x20,0x47,0x3a,0xbb,0x20
    db 0xb8,0xd4,0xad,0x0b,0xd2,0x03,0x0c,0xd6,0x0e,0xd2,0xd7,0x0b,0x2f,0xc3,0xf8,0x0b
    db 0xf5
    db 0xcd,0xd0,0x14
    call chksyn
    db 0x29,0x2b,0xf1,0xd6,0xa8,0xe5,0xca,0xf3,0x0b
    db 0x3a,0xbb,0x20,0x2f,0x83,0xd2,0x03,0x0c,0x3c,0x47,0x3e,0x20
    call outc
    dec b
    db 0xc2,0xfc,0x0b,0xe1,0xcd,0x05,0x09,0xc3,0x52,0x0b,0x3f,0x52,0x65,0x64,0x6f,0x20
    db 0x66,0x72,0x6f,0x6d,0x20,0x73,0x74,0x61,0x72,0x74,0x0d,0x0a,0x00,0x3a,0xdd,0x20
    db 0xb7,0xc2,0xa7,0x04,0xc1,0x21,0x0a,0x0c
    db 0xcd,0x4b,0x12
    db 0xc3,0xf8,0x05
    db 0xcd,0xb6,0x11
    db 0x7e,0xfe,0x22,0x3e,0x00,0x32,0x55,0x20,0xc2,0x48,0x0c
    db 0xcd,0x0a,0x12
    call chksyn
    dec sp
    push hl
    db 0xcd,0x4e,0x12
    ld a,0xe5
    db 0xcd,0xfc,0x05
    db 0xc1,0xda,0x54,0x09
    db 0x23,0x7e,0xb7,0x2b,0xc5,0xca,0x9b,0x0a,0x36,0x2c,0xc3,0x62,0x0c,0xe5,0x2a,0xec
    db 0x20,0xf6,0xaf,0x32,0xdd,0x20,0xe3,0xc3,0x6e,0x0c
    call chksyn
    inc l
    db 0xcd,0x68,0x0f
    db 0xe3,0xd5,0x7e,0xfe,0x2c,0xca,0x96,0x0c,0x3a,0xdd,0x20,0xb7,0xc2,0x03,0x0d
    db 0x3e,0x3f
    call outc
    db 0xcd,0xfc,0x05
    db 0xd1,0xc1,0xda,0x54,0x09,0x23,0x7e,0xb7
    db 0x2b,0xc5,0xca,0x9b,0x0a,0xd5,0x3a,0xbd,0x20,0xb7,0xca,0xc0,0x0c
    call getchr
    ld d,a
    ld b,a
    cp 0x22
    db 0xca,0xb4,0x0c
    db 0x3a,0xdd,0x20,0xb7,0x57,0xca,0xb1,0x0c,0x16
    db 0x3a,0x06,0x2c,0x2b
    db 0xcd,0x0d,0x12,0xeb,0x21,0xcb,0x0c,0xe3,0xd5,0xc3,0xce,0x0a
    call getchr
    db 0xcd,0x5b,0x18
    ex (sp),hl
    db 0xcd,0xac,0x17
    pop hl
    dec hl
    call getchr
    db 0xca
    db 0xd7,0x0c
    cp 0x2c
    db 0xc2,0x1d,0x0c,0xe3,0x2b
    call getchr
    db 0xc2,0x6a,0x0c,0xd1
    db 0x3a,0xdd,0x20,0xb7,0xeb,0xc2,0x2b,0x09,0xd5,0xb6,0x21,0xf2,0x0c,0xc4,0x4b,0x12
    db 0xe1,0xc9,0x3f,0x45,0x78,0x74,0x72,0x61,0x20,0x69,0x67,0x6e,0x6f,0x72,0x65,0x64
    db 0x0d,0x0a,0x00
    call data
    db 0xb7,0xc2,0x1c,0x0d,0x23,0x7e,0x23,0xb6,0x1e,0x06
    db 0xca,0xc1,0x04,0x23,0x5e,0x23,0x56,0xeb,0x22,0xd9,0x20,0xeb,0xcd,0x05,0x09,0xfe
    db 0x83,0xc2,0x03,0x0d,0xc3,0x96,0x0c,0x11,0x00,0x00,0xc4,0x68,0x0f,0x22,0xde,0x20
    db 0xcd,0x56,0x04
    db 0xc2,0xb3,0x04,0xf9,0xd5,0x7e,0x23,0xf5,0xd5
    db 0xcd,0x92,0x17
    ex (sp),hl
    push hl
    db 0xcd,0xff,0x14
    pop hl
    db 0xcd,0xac,0x17
    pop hl
    db 0xcd,0xa3,0x17
    db 0xe5
    db 0xcd,0xcf,0x17
    db 0xe1,0xc1,0x90
    db 0xcd,0xa3,0x17
    db 0xca,0x62,0x0d,0xeb,0x22,0x6c,0x20,0x69,0x60,0xc3
    db 0xc1,0x08,0xf9,0x2a,0xde,0x20,0x7e,0xfe,0x2c,0xc2,0xc5,0x08,0xcd,0x05,0x09,0xcd
    db 0x2a,0x0d
    db 0xcd,0x84,0x0d
    db 0xf6,0x37,0x3a,0xbd,0x20,0x8f,0xb7,0xe8,0xc3,0xbf,0x04
    call chksyn
    db 0x28,0x2b,0x16,0x00,0xd5,0x0e,0x01
    db 0xcd,0x8a,0x04
    db 0xcd,0xfb,0x0d
    db 0x22,0xe0,0x20,0x2a,0xe0,0x20,0xc1,0x78,0xfe,0x78,0xd4,0x75,0x0d,0x7e,0x16,0x00
    db 0xd6,0xb3,0xda,0xbc,0x0d,0xfe,0x03,0xd2,0xbc,0x0d,0xfe,0x01,0x17,0xaa,0xba,0x57
    db 0xda,0xad,0x04,0x22,0xd5,0x20
    call getchr
    db 0xc3,0xa0,0x0d,0x7a,0xb7,0xc2,0xe3
    db 0x0e,0x7e,0x22,0xd5,0x20,0xd6,0xac,0xd8,0xfe,0x07,0xd0,0x5f,0x3a,0xbd,0x20,0x3d
    db 0xb3,0x7b,0xca,0x41,0x13,0x07,0x83,0x5f,0x21,0x9f,0x03,0x19,0x78,0x56,0xba,0xd0
    db 0x23
    db 0xcd,0x75,0x0d
    db 0xc5,0x01,0x93,0x0d,0xc5,0x43,0x4a
    db 0xcd,0x85,0x17   ;call stakfp
    ld e,b
    ld d,c
    db 0x4e,0x23,0x46,0x23,0xc5,0x2a,0xd5,0x20,0xc3,0x87,0x0d
;oprnd:
    xor a
    db 0x32,0xbd,0x20
    call getchr
    db 0x1e,0x24,0xca,0xc1,0x04,0xda,0x5b,0x18
    call chkltr
    db 0xd2,0x62,0x0e
    db 0xfe,0x26,0x20,0x12
    call getchr
    cp 0x48
    db 0xca,0x9f,0x1c,0xfe,0x42,0xca,0x0f
    db 0x1d,0x1e,0x02,0xca,0xc1,0x04,0xfe,0xac,0xca,0xfb,0x0d,0xfe,0x2e,0xca,0x5b,0x18
    db 0xfe,0xad,0xca,0x51,0x0e,0xfe,0x22,0xca,0x0a,0x12,0xfe,0xaa,0xca,0x43,0x0f,0xfe
    db 0xa7,0xca,0x6e,0x11,0xd6,0xb6,0xd2,0x73,0x0e,0xcd,0x80,0x0d,0xcd,0x7b,0x07,0x29
    db 0xc9,0x16,0x7d
    db 0xcd,0x87,0x0d
    db 0x2a,0xe0,0x20,0xe5
    db 0xcd,0x7d,0x17
    db 0xcd,0x75,0x0d
    db 0xe1,0xc9
    db 0xcd,0x68,0x0f
    db 0xe5,0xeb,0x22,0xf4,0x20,0x3a,0xbd,0x20,0xb7,0xcc,0x92
    db 0x17,0xe1,0xc9,0x06,0x00,0x07,0x4f,0xc5,0xcd,0x05,0x09,0x79,0xfe,0x31,0xda,0x9a
    db 0x0e
    db 0xcd,0x80,0x0d
    call chksyn
    db 0x2c
    db 0xcd,0x76,0x0d
    db 0xeb,0x2a,0xf4,0x20,0xe3
    db 0xe5,0xeb
    db 0xcd,0xd3,0x14
    db 0xeb,0xe3,0xc3,0xa2,0x0e
    db 0xcd,0x49,0x0e
    db 0xe3,0x11,0x5d
    db 0x0e,0xd5,0x01,0xfe,0x01,0x09,0x4e,0x23,0x66,0x69,0xe9,0x15,0xfe,0xad,0xc8,0xfe
    db 0x2d,0xc8,0x14,0xfe,0x2b,0xc8,0xfe,0xac,0xc8,0x2b,0xc9,0xf6,0xaf,0xf5,0xcd,0x75
    db 0x0d
    call deint
    db 0xf1,0xeb,0xc1,0xe3,0xeb
    db 0xcd,0x95,0x17
    push af
    call deint
    db 0xf1,0xc1,0x79,0x21,0x2c,0x11,0xc2,0xde,0x0e,0xa3,0x4f,0x78,0xa2,0xe9,0xb3,0x4f
    db 0x78,0xb2,0xe9,0x21,0xf5,0x0e,0x3a,0xbd,0x20,0x1f,0x7a,0x17,0x5f,0x16,0x64,0x78
    db 0xba,0xd0,0xc3,0xe4,0x0d,0xf7,0x0e,0x79,0xb7,0x1f,0xc1,0xd1,0xf5
    db 0xcd,0x77,0x0d
    db 0x21,0x39,0x0f,0xe5,0xca,0xcf,0x17,0xaf,0x32,0xbd,0x20,0xd5,0xcd,0x8e,0x13,0x7e
    db 0x23,0x23,0x4e,0x23,0x46,0xd1,0xc5,0xf5,0xcd,0x92,0x13
    db 0xcd,0xa3,0x17
    db 0xf1,0x57
    db 0xe1,0x7b,0xb2,0xc8,0x7a,0xd6,0x01,0xd8,0xaf,0xbb,0x3c,0xd0,0x15,0x1d,0x0a,0xbe
    db 0x23,0x03,0xca,0x21,0x0f,0x3f,0xc3,0x5f,0x17,0x3c,0x8f,0xc1,0xa0,0xc6,0xff,0x9f
    db 0xc3,0x66,0x17,0x16,0x5a
    db 0xcd,0x87,0x0d
    db 0xcd,0x75,0x0d
    call deint
    db 0x7b,0x2f
    db 0x4f,0x7a,0x2f
    db 0xcd,0x2c,0x11
    db 0xc1,0xc3,0x93,0x0d,0x2b
    call getchr
    ret z
    call chksyn
    inc l
    db 0x01,0x5a,0x0f
    push bc
    or 0xaf
    db 0x32,0xbc,0x20,0x46
    call chkltr
    db 0xda,0xad,0x04,0xaf,0x4f,0x32,0xbd,0x20
    call getchr
    db 0xda,0x84,0x0f
    call chkltr
    db 0xda,0x91,0x0f,0x4f
    call getchr
    db 0xda,0x85,0x0f
    call chkltr
    db 0xd2,0x85
    db 0x0f,0xd6,0x24,0xc2,0xa0,0x0f,0x3c,0x32,0xbd,0x20,0x0f,0x81,0x4f
    call getchr
db 0x3a,0xdb,0x20,0x3d,0xca,0x4d,0x10,0xf2,0xb0,0x0f,0x7e,0xd6,0x28,0xca,0x25,0x10
db 0xaf,0x32,0xdb,0x20,0xe5,0x50,0x59,0x2a,0xee,0x20,0xcd,0x75,0x07,0x11,0xf0,0x20
db 0xca,0x95,0x16,0x2a,0xe8,0x20,0xeb,0x2a,0xe6,0x20,0xcd,0x75,0x07,0xca,0xe3,0x0f
db 0x79,0x96,0x23,0xc2,0xd8,0x0f,0x78,0x96,0x23,0xca,0x17,0x10,0x23,0x23,0x23,0x23
db 0xc3,0xca,0x0f,0xe1,0xe3,0xd5,0x11,0x65,0x0e,0xcd,0x75,0x07,0xd1,0xca,0x1a,0x10
db 0xe3,0xe5,0xc5,0x01,0x06,0x00,0x2a,0xea,0x20,0xe5,0x09,0xc1,0xe5,0xcd,0x79,0x04
db 0xe1,0x22,0xea,0x20,0x60,0x69,0x22,0xe8,0x20,0x2b,0x36,0x00,0xcd,0x75,0x07,0xc2
db 0x09,0x10,0xd1,0x73,0x23,0x72,0x23,0xeb,0xe1,0xc9,0x32,0xf7,0x20,0x21,0x49,0x04
db 0x22,0xf4,0x20,0xe1,0xc9,0xe5,0x2a,0xbc,0x20,0xe3,0x57,0xd5,0xc5
    call fpsint
db 0xc1,0xf1,0xeb,0xe3,0xe5,0xeb,0x3c,0x57,0x7e,0xfe,0x2c,0xca,0x2b,0x10,0xcd,0x7b
db 0x07,0x29,0x22,0xe0,0x20,0xe1,0x22,0xbc,0x20,0x1e,0x00,0xd5,0x11,0xe5,0xf5,0x2a
db 0xe8,0x20,0x3e,0x19,0xeb,0x2a,0xea,0x20,0xeb
db 0xcd,0x75,0x07
db 0xca,0x85,0x10,0x7e
db 0xb9,0x23,0xc2,0x67,0x10,0x7e,0xb8,0x23,0x5e,0x23,0x56,0x23,0xc2,0x53,0x10,0x3a
db 0xbc,0x20,0xb7,0xc2,0xb6,0x04,0xf1,0x44,0x4d,0xca,0x95,0x16,0x96,0xca,0xe3,0x10
db 0x1e,0x10,0xc3,0xc1,0x04,0x11,0x04,0x00,0xf1,0xca,0xcc,0x09,0x71,0x23,0x70,0x23
db 0x4f
db 0xcd,0x8a,0x04
db 0x23,0x23,0x22,0xd5,0x20,0x71,0x23,0x3a,0xbc,0x20,0x17,0x79
db 0x01,0x0b,0x00,0xd2,0xa8,0x10,0xc1,0x03,0x71,0x23,0x70,0x23,0xf5,0xe5,0xcd,0x40
db 0x18,0xeb,0xe1,0xf1,0x3d,0xc2,0xa0,0x10,0xf5,0x42,0x4b,0xeb,0x19,0xda,0xa2,0x04
db 0xcd,0x93,0x04
db 0x22,0xea,0x20,0x2b,0x36,0x00
    call cpdehl
db 0xc2,0xc6,0x10,0x03
db 0x57,0x2a,0xd5,0x20,0x5e,0xeb,0x29,0x09,0xeb,0x2b,0x2b,0x73,0x23,0x72,0x23,0xf1
db 0xda,0x07,0x11,0x47,0x4f,0x7e,0x23,0x16,0xe1,0x5e,0x23,0x56,0x23,0xe3,0xf5,0xcd
db 0x75,0x07,0xd2,0x80,0x10,0xe5,0xcd,0x40,0x18,0xd1,0x19,0xf1,0x3d,0x44,0x4d,0xc2
db 0xe8,0x10,0x29,0x29,0xc1,0x09,0xeb,0x2a,0xe0,0x20,0xc9,0x2a,0xea,0x20,0xeb,0x21
db 0x00,0x00,0x39,0x3a,0xbd,0x20,0xb7,0xca,0x27,0x11,0xcd,0x8e,0x13,0xcd,0x8e,0x12
db 0x2a,0x6a,0x20,0xeb,0x2a,0xd3,0x20,0x7d,0x93,0x4f,0x7c,0x9a,0x41,0x50,0x1e,0x00
db 0x21,0xbd,0x20,0x73,0x06,0x90,0xc3,0x6b,0x17,0x3a,0xbb,0x20,0x47,0xaf,0xc3,0x2d
db 0x11
db 0xcd,0xc4,0x11
db 0xcd,0xb6,0x11
db 0x01,0x9c,0x0a,0xc5,0xd5
    call chksyn
    db 0x28
    db 0xcd,0x68,0x0f
    db 0xe5,0xeb,0x2b,0x56,0x2b,0x5e,0xe1
    db 0xcd,0x75,0x0d
    call chksyn
    add hl,hl
    call chksyn
    db 0xb4,0x44,0x4d,0xe3,0x71,0x23,0x70,0xc3,0x03,0x12
    db 0xcd,0xc4,0x11
    db 0xd5
    db 0xcd,0x49,0x0e
    db 0xcd,0x75,0x0d
    db 0xe3,0x5e,0x23,0x56,0x23,0x7a,0xb3,0xca
    db 0xb9,0x04,0x7e,0x23,0x66,0x6f,0xe5,0x2a,0xee,0x20,0xe3,0x22,0xee,0x20,0x2a,0xf2
    db 0x20,0xe5,0x2a,0xf0,0x20,0xe5,0x21,0xf0,0x20,0xd5,0xcd,0xac,0x17,0xe1,0xcd,0x72
    db 0x0d,0x2b
    call getchr
    db 0xc2,0xad,0x04,0xe1,0x22,0xf0,0x20,0xe1,0x22,0xf2,0x20
    db 0xe1,0x22,0xee,0x20,0xe1,0xc9,0xe5,0x2a,0x6c,0x20,0x23,0x7c,0xb5,0xe1,0xc0,0x1e
    db 0x16,0xc3,0xc1,0x04
    call chksyn
    db 0xa7,0x3e,0x80,0x32,0xdb,0x20,0xb6,0x47
    db 0xcd,0x6d,0x0f
    db 0xc3,0x75,0x0d
str:
    db 0xcd,0x75,0x0d   ;call tstnum
    db 0xcd,0xf9,0x18   ;call numasc
str1:
    call crtst
    db 0xcd,0x8e,0x13   ;call gstrcu
    db 0x01,0xe9,0x13
    push bc
savstr:
    ld a,(hl)
    inc hl
    inc hl
    push hl
    call testr
    db 0xe1,0x4e,0x23,0x46
    call crtmst
    push hl
    ld l,a
    db 0xcd,0x81,0x13   ;call tostra
    pop de
    ret
mktmst:
    call testr
;lbl_11fd
crtmst:
    ld hl,0x20cf
    push hl
    ld (hl),a
    inc hl
svstad:
    inc hl
    ld (hl),e
    inc hl
    ld (hl),d
    pop hl
    ret
;lbl_1209:
crtst:
    dec hl
qtstr:
    ld b,0x22
    ld d,b
dtstr:
    push hl
    ld c,0xff
qtstlp:
    inc hl
    ld a,(hl)
    inc c
    or a
    db 0xca,0x1f,0x12,0xba,0xca,0x1f,0x12,0xb8,0xc2,0x10,0x12
crtste:
    cp 0x22
    call z,getchr
    ex (sp),hl
    inc hl
    db 0xeb,0x79
    call crtmst
tstopl:
    db 0x11,0xcf,0x20,0x2a,0xc1
    db 0x20,0x22,0xf4,0x20,0x3e,0x01,0x32,0xbd,0x20
    db 0xcd,0xaf,0x17   ;call dethl4
    call cpdehl
    db 0x22
    db 0xc1,0x20,0xe1,0x7e,0xc0,0x1e,0x1e,0xc3,0xc1,0x04
prnums:
    inc hl
;lbl_124b:
prs:
    call crtst
prs1:
    db 0xcd,0x8e,0x13
    db 0xcd,0xa3,0x17
    inc e
prslp:
    dec e
    ret z
    ld a,(bc)
    call outc
    cp 0x0d
    db 0xcc,0xb7,0x0b
    db 0x03,0xc3,0x55,0x12
;lbl_1264:
testr:
    or a
    ld c,0xf1
    db 0xf5,0x2a,0x6a,0x20,0xeb,0x2a,0xd3,0x20,0x2f
    db 0x4f,0x06,0xff,0x09,0x23
    call cpdehl
    db 0xda,0x82,0x12,0x22,0xd3,0x20,0x23,0xeb
    db 0xf1,0xc9,0xf1,0x1e,0x1a,0xca,0xc1,0x04,0xbf,0xf5,0x01,0x66,0x12,0xc5,0x2a,0xbf
    db 0x20,0x22,0xd3,0x20,0x21,0x00,0x00,0xe5,0x2a,0x6a,0x20,0xe5,0x21,0xc3,0x20,0xeb
    db 0x2a,0xc1,0x20,0xeb
    call cpdehl
    db 0x01,0x9f,0x12,0xc2,0xf3,0x12,0x2a,0xe6,0x20
    db 0xeb,0x2a,0xe8,0x20,0xeb
    call cpdehl
    db 0xca,0xc6,0x12,0x7e,0x23,0x23,0xb7,0xcd
    db 0xf6,0x12,0xc3,0xb0,0x12,0xc1,0xeb,0x2a,0xea,0x20,0xeb,0xcd,0x75,0x07,0xca,0x1c
    db 0x13
    db 0xcd,0xa3,0x17
    db 0x7b,0xe5,0x09,0xb7,0xf2,0xc5,0x12,0x22,0xd5,0x20,0xe1,0x4e
    db 0x06,0x00,0x09,0x09,0x23,0xeb,0x2a,0xd5,0x20,0xeb
    call cpdehl
db 0xca,0xc6,0x12
db 0x01,0xe5,0x12,0xc5,0xf6,0x80,0x7e,0x23,0x23,0x5e,0x23,0x56,0x23,0xf0,0xb7,0xc8
db 0x44,0x4d,0x2a,0xd3,0x20,0xcd,0x75,0x07,0x60,0x69,0xd8,0xe1,0xe3,0xcd,0x75,0x07
db 0xe3,0xe5,0x60,0x69,0xd0,0xc1,0xf1,0xf1,0xe5,0xd5,0xc5,0xc9,0xd1,0xe1,0x7d,0xb4
db 0xc8,0x2b,0x46,0x2b,0x4e,0xe5,0x2b,0x2b,0x6e,0x26,0x00,0x09,0x50,0x59,0x2b,0x44
db 0x4d,0x2a,0xd3,0x20,0xcd,0x7c,0x04,0xe1,0x71,0x23,0x70,0x69,0x60,0x2b,0xc3,0x91
db 0x12,0xc5,0xe5,0x2a,0xf4,0x20,0xe3,0xcd,0xfb,0x0d,0xe3,0xcd,0x76,0x0d,0x7e,0xe5
db 0x2a,0xf4,0x20,0xe5,0x86,0x1e,0x1c,0xda,0xc1,0x04,0xcd,0xfa,0x11,0xd1,0xcd,0x92
db 0x13,0xe3,0xcd,0x91,0x13,0xe5,0x2a,0xd1,0x20,0xeb,0xcd,0x78,0x13,0xcd,0x78,0x13
db 0x21,0x90,0x0d,0xe3,0xe5,0xc3,0x2b,0x12,0xe1,0xe3,0x7e,0x23,0x23,0x4e,0x23,0x46
db 0x6f,0x2c,0x2d,0xc8,0x0a,0x12,0x03,0x13,0xc3,0x82,0x13,0xcd,0x76,0x0d,0x2a,0xf4
db 0x20,0xeb,0xcd,0xac,0x13,0xeb,0xc0,0xd5,0x50,0x59,0x1b,0x4e,0x2a,0xd3,0x20,0xcd
db 0x75,0x07,0xc2,0xaa,0x13,0x47,0x09,0x22,0xd3,0x20,0xe1,0xc9,0x2a,0xc1,0x20,0x2b
db 0x46,0x2b,0x4e,0x2b,0x2b,0xcd,0x75,0x07,0xc0,0x22,0xc1,0x20,0xc9,0x01,0x3c,0x11
db 0xc5,0xcd,0x8b,0x13,0xaf,0x57,0x32,0xbd,0x20,0x7e,0xb7,0xc9,0x01,0x3c,0x11,0xc5
db 0xcd,0xc1,0x13
db 0xca,0xcc,0x09,0x23,0x23,0x5e,0x23,0x56,0x1a,0xc9,0x3e,0x01,0xcd
db 0xfa,0x11
db 0xcd,0xd6,0x14
db 0x2a,0xd1,0x20,0x73,0xc1,0xc3,0x2b,0x12
db 0xcd,0x86,0x14
db 0xaf,0xe3,0x4f,0xe5,0x7e,0xb8,0xda,0xfb,0x13,0x78,0x11,0x0e,0x00,0xc5
db 0xcd,0x64,0x12
db 0xc1,0xe1,0xe5,0x23,0x23,0x46,0x23,0x66,0x68,0x06,0x00,0x09,0x44,0x4d,0xcd
db 0xfd,0x11,0x6f,0xcd,0x81,0x13,0xd1
db 0xcd,0x92,0x13
db 0xc3,0x2b,0x12
db 0xcd,0x86,0x14
db 0xd1,0xd5,0x1a,0x90,0xc3,0xf1,0x13,0xeb,0x7e
db 0xcd,0x8b,0x14
db 0x04,0x05,0xca,0xcc
db 0x09,0xc5,0x1e,0xff,0xfe,0x29,0xca,0x40,0x14,0xcd,0x7b,0x07,0x2c,0xcd,0xd3,0x14
    call chksyn
    db 0x29,0xf1,0xe3,0x01,0xf3,0x13,0xc5,0x3d,0xbe,0x06,0x00,0xd0,0x4f
    db 0x7e,0x91,0xbb,0x47,0xd8,0x43,0xc9,0xcd,0xc1,0x13,0xca,0x74,0x15,0x5f,0x23,0x23
    db 0x7e,0x23,0x66,0x6f,0xe5,0x19,0x46,0x72,0xe3,0xc5,0x7e,0xfe,0x24,0xc2,0x75,0x14
    db 0xcd,0x9f,0x1c,0x18,0x0d,0xfe,0x25,0xc2,0x7f,0x14,0xcd,0x0f,0x1d,0x18,0x03,0xcd
    db 0x5b,0x18,0xc1,0xe1,0x70,0xc9,0xeb,0xcd,0x7b,0x07,0x29,0xc1,0xd1,0xc5,0x43,0xc9
;lbl_1490:
inp:
    db 0xcd,0xd6,0x14
    db 0x32,0x4f,0x20
    db 0xcd,0x4e,0x20
    db 0xc3,0x3c,0x11
;lbl_149c:
pout:
    call setio
    db 0xc3,0x16,0x20
;lbl_14a2:
wait:
    call setio
    db 0xf5,0x1e,0x00,0x2b
    call getchr
    db 0xca,0xb6,0x14
    call chksyn
    db 0x2c
    call getint
noxor:
    pop bc
waitlp:
    db 0xcd,0x4e,0x20,0xab,0xa0,0xca,0xb7,0x14
    ret
;lbl_14c0:
setio:
    call getint
    ld (0x204f),a
    ld (0x2017),a
    call chksyn
    db 0x2c
    jp getint
fndnum:
    call getchr
;lbl_14d3:
getint:
    db 0xcd,0x72,0x0d
    db 0xcd,0xb1,0x09
    ld a,d
    or a
    db 0xc2,0xcc,0x09,0x2b
    call getchr
    ld a,e
    ret
;lbl_14e4:
peek:
    call deint
    ld a,(de)
    db 0xc3,0x3c,0x11
;lbl_14eb:
poke:
    db 0xcd,0x72,0x0d
    call deint
    push de
    call chksyn
db 0x2c
    call getint
db 0xd1,0x12,0xc9,0x21,0xd2,0x19
db 0xcd,0xa3,0x17
db 0xc3,0x0e,0x15
db 0xcd,0xa3,0x17
db 0x21,0xc1,0xd1
db 0xcd,0x7d,0x17
db 0x78,0xb7
db 0xc8,0x3a,0xf7,0x20,0xb7,0xca,0x95,0x17,0x90,0xd2,0x28,0x15,0x2f,0x3c,0xeb
db 0xcd,0x85,0x17
db 0xeb
db 0xcd,0x95,0x17
db 0xc1,0xd1,0xfe,0x19,0xd0,0xf5
db 0xcd,0xba,0x17
db 0x67
db 0xf1
db 0xcd,0xd3,0x15
db 0xb4,0x21,0xf4,0x20,0xf2,0x4e,0x15
db 0xcd,0xb3,0x15
db 0xd2,0x94
db 0x15,0x23,0x34,0xca,0xbc,0x04,0x2e,0x01
db 0xcd,0xe9,0x15
db 0xc3,0x94,0x15,0xaf,0x90
db 0x47,0x7e,0x9b,0x5f,0x23,0x7e,0x9a,0x57,0x23,0x7e,0x99,0x4f,0xdc,0xbf,0x15,0x68
db 0x63,0xaf,0x47,0x79,0xb7,0xc2,0x81,0x15,0x4a,0x54,0x65,0x6f,0x78,0xd6,0x08,0xfe
db 0xe0,0xc2,0x62,0x15,0xaf,0x32,0xf7,0x20,0xc9,0x05,0x29,0x7a,0x17,0x57,0x79,0x8f
db 0x4f,0xf2,0x79,0x15,0x78,0x5c,0x45,0xb7,0xca,0x94,0x15,0x21,0xf7,0x20,0x86,0x77
db 0xd2,0x74,0x15,0xc8,0x78,0x21,0xf7,0x20,0xb7,0xfc,0xa6,0x15,0x46,0x23,0x7e,0xe6
db 0x80,0xa9,0x4f,0xc3,0x95,0x17,0x1c,0xc0,0x14,0xc0,0x0c,0xc0,0x0e,0x80,0x34,0xc0
db 0xc3,0xbc,0x04,0x7e,0x83,0x5f,0x23,0x7e,0x8a,0x57,0x23,0x7e,0x89,0x4f,0xc9,0x21
db 0xf8,0x20,0x7e,0x2f,0x77,0xaf,0x6f,0x90,0x47,0x7d,0x9b,0x5f,0x7d,0x9a,0x57,0x7d
db 0x99,0x4f,0xc9,0x06,0x00,0xd6,0x08,0xda,0xe2,0x15,0x43,0x5a,0x51,0x0e,0x00,0xc3
db 0xd5,0x15,0xc6,0x09,0x6f,0xaf,0x2d,0xc8,0x79,0x1f,0x4f,0x7a,0x1f,0x57,0x7b,0x1f
db 0x5f,0x78,0x1f,0x47,0xc3,0xe5,0x15,0x00,0x00,0x00,0x81,0x03,0xaa,0x56,0x19,0x80
db 0xf1,0x22,0x76,0x80,0x45,0xaa,0x38,0x82
db 0xcd,0x54,0x17
    or a
    db 0xea,0xcc,0x09,0x21
    db 0xf7,0x20,0x7e,0x01,0x35,0x80,0x11,0xf3,0x04,0x90,0xf5,0x70,0xd5,0xc5,0xcd,0x0e
    db 0x15,0xc1,0xd1,0x04,0xcd,0xaa,0x16,0x21,0xf7,0x15,0xcd,0x05,0x15,0x21,0xfb,0x15
    db 0xcd,0x9c,0x1a
    db 0x01,0x80,0x80,0x11,0x00,0x00
    db 0xcd,0x0e,0x15
    pop af
db 0xcd,0xcf,0x18
db 0x01,0x31,0x80,0x11,0x18,0x72,0x21,0xc1,0xd1
db 0xcd,0x54,0x17
db 0xc8,0x2e,0x00
db 0xcd,0x12,0x17
db 0x79,0x32,0x06,0x21,0xeb,0x22,0x07,0x21,0x01,0x00,0x00,0x50,0x58,0x21
db 0x5f,0x15,0xe5,0x21,0x6b,0x16,0xe5,0xe5,0x21,0xf4,0x20,0x7e,0x23,0xb7,0xca,0x97
db 0x16,0xe5,0x2e,0x08,0x1f,0x67,0x79,0xd2,0x85,0x16,0xe5,0x2a,0x07,0x21,0x19,0xeb
db 0xe1,0x3a,0x06,0x21,0x89,0x1f,0x4f,0x7a,0x1f,0x57,0x7b,0x1f,0x5f,0x78,0x1f,0x47
db 0x2d,0x7c,0xc2,0x74,0x16,0xe1,0xc9,0x43,0x5a,0x51,0x4f,0xc9
db 0xcd,0x85,0x17
db 0x01
db 0x20,0x84,0x11,0x00,0x00
db 0xcd,0x95,0x17
db 0xc1,0xd1
db 0xcd,0x54,0x17
db 0xca,0xb0,0x04
db 0x2e,0xff
db 0xcd,0x12,0x17
db 0x34,0x34,0x2b,0x7e,0x32,0x22,0x20,0x2b,0x7e,0x32,0x1e
db 0x20,0x2b,0x7e,0x32,0x1a,0x20,0x41,0xeb,0xaf,0x4f,0x57,0x5f,0x32,0x25,0x20,0xe5
db 0xc5,0x7d
db 0xcd,0x19,0x20
db 0xde,0x00,0x3f,0xd2,0xe2,0x16,0x32,0x25,0x20,0xf1,0xf1
db 0x37,0xd2,0xc1,0xe1,0x79,0x3c,0x3d,0x1f,0xfa,0x95,0x15,0x17,0x7b,0x17,0x5f,0x7a
db 0x17,0x57,0x79,0x17,0x4f,0x29,0x78,0x17,0x47,0x3a,0x25,0x20,0x17,0x32,0x25,0x20
db 0x79,0xb2,0xb3,0xc2,0xcf,0x16,0xe5,0x21,0xf7,0x20,0x35,0xe1,0xc2,0xcf,0x16,0xc3
db 0xbc,0x04,0x78,0xb7,0xca,0x36,0x17,0x7d,0x21,0xf7,0x20,0xae,0x80,0x47,0x1f,0xa8
db 0x78,0xf2,0x35,0x17,0xc6,0x80,0x77,0xca,0x95,0x16
db 0xcd,0xba,0x17
db 0x77,0x2b,0xc9
db 0xcd,0x54,0x17
db 0x2f,0xe1,0xb7,0xe1,0xf2,0x74,0x15,0xc3,0xbc,0x04
db 0xcd,0xa0,0x17
db 0x78,0xb7,0xc8,0xc6,0x02,0xda,0xbc,0x04,0x47
db 0xcd,0x0e,0x15
db 0x21,0xf7,0x20,0x34
db 0xc0,0xc3,0xbc,0x04,0x3a,0xf7,0x20,0xb7,0xc8,0x3a,0xf6,0x20,0xfe,0x2f,0x17,0x9f
db 0xc0,0x3c,0xc9
db 0xcd,0x54,0x17
db 0x06,0x88,0x11,0x00,0x00,0x21,0xf7,0x20,0x4f,0x70
db 0x06,0x00,0x23,0x36,0x80,0x17,0xc3,0x5c,0x15
db 0xcd,0x54,0x17
db 0xf0,0x21,0xf6,0x20
db 0x7e,0xee,0x80,0x77,0xc9,0xeb,0x2a,0xf4,0x20,0xe3,0xe5,0x2a,0xf6,0x20,0xe3,0xe5
db 0xeb,0xc9
db 0xcd,0xa3,0x17
db 0xeb,0x22,0xf4,0x20,0x60,0x69,0x22,0xf6,0x20,0xeb,0xc9
db 0x21,0xf4,0x20,0x5e,0x23,0x56,0x23,0x4e,0x23,0x46,0x23,0xc9,0x11,0xf4,0x20,0x06
db 0x04,0x1a,0x77,0x13,0x23,0x05,0xc2,0xb1,0x17,0xc9,0x21,0xf6,0x20,0x7e,0x07,0x37
db 0x1f,0x77,0x3f,0x1f,0x23,0x23,0x77,0x79,0x07,0x37,0x1f,0x4f,0x1f,0xae,0xc9,0x78
db 0xb7,0xca,0x54,0x17,0x21,0x5d,0x17,0xe5
db 0xcd,0x54,0x17
db 0x79,0xc8,0x21,0xf6,0x20
db 0xae,0x79,0xf8
db 0xcd,0xe9,0x17
db 0x1f,0xa9,0xc9,0x23,0x78,0xbe,0xc0,0x2b,0x79,0xbe
db 0xc0,0x2b,0x7a,0xbe,0xc0,0x2b,0x7b,0x96,0xc0,0xe1,0xe1,0xc9,0x47,0x4f,0x57,0x5f
db 0xb7,0xc8,0xe5
db 0xcd,0xa0,0x17
db 0xcd,0xba,0x17,0xae,0x67,0xfc,0x20,0x18,0x3e,0x98
db 0x90
db 0xcd,0xd3,0x15
db 0x7c,0x17,0xdc,0xa6,0x15,0x06,0x00,0xdc,0xbf,0x15,0xe1,0xc9
db 0x1b,0x7a,0xa3,0x3c,0xc0,0x0b,0xc9,0x21,0xf7,0x20,0x7e,0xfe,0x98,0x3a,0xf4,0x20
db 0xd0,0x7e,0xcd,0xfc,0x17,0x36,0x98,0x7b,0xf5,0x79,0x17,0xcd,0x5c,0x15,0xf1,0xc9
db 0x21,0x00,0x00,0x78,0xb1,0xc8,0x3e,0x10,0x29,0xda,0x80,0x10,0xeb,0x29,0xeb,0xd2
db 0x56,0x18,0x09,0xda,0x80,0x10,0x3d,0xc2,0x48,0x18,0xc9,0xfe,0x2d,0xf5,0xca,0x67
db 0x18,0xfe,0x2b,0xca,0x67,0x18,0x2b,0xcd,0x74,0x15,0x47,0x57,0x5f,0x2f,0x4f,0xcd
db 0x05,0x09,0xda,0xb8,0x18,0xfe,0x2e,0xca,0x93,0x18,0xfe,0x45,0xc2,0x97,0x18
    call getchr
    db 0xcd,0xab,0x0e   ;call sgnexp?
    call getchr
db 0xda,0xda,0x18,0x14,0xc2,0x97,0x18
    xor a
    sub e
db 0x5f,0x0c,0x0c,0xca,0x6f,0x18,0xe5,0x7b,0x90,0xf4,0xb0,0x18,0xf2,0xa6,0x18
db 0xf5
db 0xcd,0x9c,0x16
db 0xf1,0x3c,0xc2,0x9a,0x18,0xd1,0xf1,0xcc,0x7d,0x17,0xeb,0xc9
db 0xc8,0xf5
db 0xcd,0x3d,0x17
db 0xf1,0x3d,0xc9,0xd5,0x57,0x78,0x89,0x47,0xc5,0xe5,0xd5
db 0xcd,0x3d,0x17
db 0xf1,0xd6,0x30
db 0xcd,0xcf,0x18
db 0xe1,0xc1,0xd1,0xc3,0x6f,0x18
db 0xcd,0x85,0x17
db 0xcd,0x66,0x17
db 0xc1,0xd1,0xc3,0x0e,0x15,0x7b,0x07,0x07,0x83,0x07,0x86
db 0xd6,0x30,0x5f,0xc3,0x85,0x18,0xe5,0x21,0x45,0x04
db 0xcd,0x4b,0x12
db 0xe1,0xeb,0xaf
db 0x06,0x98
db 0xcd,0x6b,0x17
db 0x21,0x4a,0x12,0xe5,0x21,0xf9,0x20,0xe5
db 0xcd,0x54,0x17
db 0x36,0x20,0xf2,0x07,0x19,0x36,0x2d,0x23,0x36,0x30,0xca,0xbd,0x19,0xe5,0xfc,0x7d
db 0x17,0xaf,0xf5
db 0xcd,0xc3,0x19,0x01,0x43,0x91,0x11,0xf8,0x4f
db 0xcd,0xcf,0x17,0xb7
db 0xe2,0x34,0x19,0xf1
db 0xcd,0xb1,0x18
db 0xf5,0xc3,0x16,0x19
db 0xcd,0x9c,0x16
    pop af
    inc a
    push af
db 0xcd,0xc3,0x19
db 0xcd,0xfc,0x14
db 0x3c
db 0xcd,0xfc,0x17
db 0xcd,0x95,0x17,0x01,0x06
db 0x03,0xf1,0x81,0x3c,0xfa,0x50,0x19,0xfe,0x08,0xd2,0x50,0x19,0x3c,0x47,0x3e,0x02
db 0x3d,0x3d,0xe1,0xf5,0x11,0xd6,0x19,0x05,0xc2,0x61,0x19,0x36,0x2e,0x23,0x36,0x30
db 0x23,0x05,0x36,0x2e,0xcc,0xaa,0x17,0xc5,0xe5,0xd5,0xcd,0xa0,0x17,0xe1,0x06,0x2f
db 0x04,0x7b,0x96,0x5f,0x23,0x7a,0x9e,0x57,0x23,0x79,0x9e,0x4f,0x2b,0x2b,0xd2,0x70
db 0x19
db 0xcd,0xb3,0x15
    inc hl
db 0xcd,0x95,0x17
db 0xeb,0xe1,0x70,0x23,0xc1,0x0d,0xc2,0x61
db 0x19,0x05,0xca,0xa1,0x19,0x2b,0x7e,0xfe,0x30,0xca,0x95,0x19,0xfe,0x2e,0xc4,0xaa
db 0x17,0xf1,0xca,0xc0,0x19,0x36,0x45,0x23,0x36,0x2b,0xf2,0xb1,0x19,0x36,0x2d,0x2f
db 0x3c,0x06,0x2f,0x04,0xd6,0x0a,0xd2,0xb3,0x19,0xc6,0x3a,0x23,0x70,0x23,0x77,0x23
db 0x71,0xe1,0xc9,0x01,0x74,0x94,0x11,0xf7,0x23
db 0xcd,0xcf,0x17
db 0xb7,0xe1,0xe2,0x2b
db 0x19,0xe9,0x00,0x00,0x00,0x80,0xa0,0x86,0x01,0x10,0x27,0x00,0xe8,0x03,0x00,0x64
db 0x00,0x00,0x0a,0x00,0x00,0x01,0x00,0x00,0x21,0x7d,0x17,0xe3,0xe9,0xcd,0x85,0x17
db 0x21,0xd2,0x19,0xcd,0x92,0x17,0xc1,0xd1,0xcd,0x54,0x17,0x78,0xca,0x3b,0x1a,0xf2
db 0x06,0x1a,0xb7,0xca,0xb0,0x04,0xb7,0xca,0x75,0x15,0xd5,0xc5,0x79,0xf6,0x7f,0xcd
db 0xa0,0x17,0xf2,0x23,0x1a,0xd5,0xc5
db 0xcd,0x27,0x18
db 0xc1,0xd1,0xf5
db 0xcd,0xcf,0x17
db 0xe1,0x7c,0x1f,0xe1,0x22,0xf6,0x20,0xe1,0x22,0xf4,0x20,0xdc,0xe8,0x19,0xcc,0x7d
db 0x17,0xd5,0xc5
db 0xcd,0x08,0x16
db 0xc1,0xd1
db 0xcd,0x49,0x16
db 0xcd,0x85,0x17
db 0x01,0x38
db 0x81,0x11,0x3b,0xaa,0xcd,0x49,0x16,0x3a,0xf7,0x20,0xfe,0x88,0xd2,0x30,0x17
db 0xcd,0x27,0x18
db 0xc6,0x80,0xc6,0x02,0xda,0x30,0x17,0xf5,0x21,0xf7,0x15
db 0xcd,0xff,0x14
db 0xcd,0x40,0x16
db 0xf1,0xc1,0xd1,0xf5
db 0xcd,0x0b,0x15
db 0xcd,0x7d,0x17
db 0x21,0x7b,0x1a
db 0xcd,0xab,0x1a
db 0x11,0x00,0x00,0xc1,0x4a,0xc3,0x49,0x16,0x08,0x40,0x2e,0x94,0x74
db 0x70,0x4f,0x2e,0x77,0x6e,0x02,0x88,0x7a,0xe6,0xa0,0x2a,0x7c,0x50,0xaa,0xaa,0x7e
db 0xff,0xff,0x7f,0x7f,0x00,0x00,0x80,0x81,0x00,0x00,0x00,0x81,0xcd,0x85,0x17,0x11
db 0x47,0x16,0xd5,0xe5
db 0xcd,0xa0,0x17
db 0xcd,0x49,0x16
db 0xe1
db 0xcd,0x85,0x17
db 0x7e,0x23
db 0xcd,0x92,0x17
db 0x06,0xf1,0xc1,0xd1,0x3d,0xc8,0xd5,0xc5,0xf5,0xe5,0xcd,0x49,0x16
db 0xe1
db 0xcd,0xa3,0x17
    push hl
db 0xcd,0x0e,0x15
db 0xe1,0xc3,0xb4,0x1a
db 0xcd,0x54,0x17
db 0x21
db 0x29,0x20,0xfa,0x2d,0x1b,0x21,0x4a,0x20
db 0xcd,0x92,0x17
db 0x21,0x29,0x20,0xc8,0x86
db 0xe6,0x07,0x06,0x00,0x77,0x23,0x87,0x87,0x4f,0x09
db 0xcd,0xa3,0x17
db 0xcd,0x49,0x16
db 0x3a,0x28,0x20,0x3c,0xe6,0x03,0x06,0x00,0xfe,0x01,0x88,0x32,0x28,0x20,0x21,0x31
db 0x1b,0x87,0x87,0x4f,0x09
db 0xcd,0xff,0x14
db 0xcd,0xa0,0x17
db 0x7b,0x59,0xee,0x4f,0x4f
db 0x36,0x80,0x2b,0x46,0x36,0x80,0x21,0x27,0x20,0x34,0x7e,0xd6,0xab,0xc2,0x24,0x1b
db 0x77,0x0c,0x15,0x1c
db 0xcd,0x5f,0x15
db 0x21,0x4a,0x20,0xc3,0xac,0x17,0x77,0x2b,0x77
db 0x2b,0x77,0xc3,0x08,0x1b

db 0x68,0xb1,0x46,0x68
db 0x99,0xe9,0x92,0x69
db 0x10,0xd1,0x75,0x68

;lbl_1b41:
cos:
    db 0x21,0x8b,0x1b
    db 0xcd,0xff,0x14
;lbl_1b47:
sin:
    db 0xcd,0x85,0x17   ;call stakfp
    db 0x01,0x49,0x83
    db 0x11,0xdb,0x0f
    db 0xcd,0x95,0x17   ;call fpbcde
    pop bc
    pop de
    db 0xcd,0xaa,0x16   ;call dvbcde
    db 0xcd,0x85,0x17   ;call stakfp
    db 0xcd,0x27,0x18   ;call int
    pop bc
    pop de
    db 0xcd,0x0b,0x15   ;call subcde
    db 0x21,0x8f,0x1b
    db 0xcd,0x05,0x15   ;call subphl
    db 0xcd,0x54,0x17   ;call tstsgn
    scf
    jp p,sin1
    db 0xcd,0xfc,0x14   ;call round
    db 0xcd,0x54,0x17   ;call tstsgn
    or a
sin1:
    push af
    db 0xf4,0x7d,0x17,0x21,0x8f,0x1b
    db 0xcd,0xff,0x14
    db 0xf1,0xd4,0x7d,0x17,0x21,0x93,0x1b,0xc3,0x9c,0x1a,0xdb,0x0f,0x49,0x81,0x00
    db 0x00,0x00,0x7f,0x05,0xba,0xd7,0x1e,0x86,0x64,0x26,0x99,0x87,0x58,0x34,0x23,0x87
    db 0xe0,0x5d,0xa5,0x86,0xda,0x0f,0x49,0x83
    db 0xcd,0x85,0x17
    call sin
    db 0xc1,0xe1
    db 0xcd,0x85,0x17
    ex de,hl
db 0xcd,0x95,0x17
db 0xcd,0x41,0x1b
db 0xc3,0xa8,0x16
db 0xcd,0x54,0x17   ;call tstsgn
db 0xfc,0xe8,0x19,0xfc,0x7d,0x17,0x3a,0xf7,0x20,0xfe,0x81,0xda,0xda,0x1b,0x01,0x00
db 0x81,0x51,0x59
db 0xcd,0xaa,0x16
db 0x21,0x05,0x15,0xe5,0x21,0xe4,0x1b
db 0xcd,0x9c,0x1a
db 0x21,0x8b,0x1b
    ret
db 0x09,0x4a,0xd7,0x3b,0x78,0x02,0x6e,0x84,0x7b,0xfe,0xc1,0x2f
db 0x7c,0x74,0x31,0x9a,0x7d,0x84,0x3d,0x5a,0x7d,0xc8,0x7f,0x91,0x7e,0xe4,0xbb,0x4c
db 0x7e,0x6c,0xaa,0xaa,0x7f,0x00,0x00,0x00,0x81
;aret:
    ret
;getinp:
    rst 0x10
    ret
;lbl_1c0c:
cls:
    db 0x3e,0x0c,0xc3,0x46
    db 0x1d
;lbl_1c11:
width:
    call getint
    ld a,e
    db 0x32,0x52,0x20
    ret
    db 0xcd,0x72,0x0d
    call deint
    db 0xed
db 0x53,0x56,0x20,0xed,0x53,0x58,0x20
    ret
    call deint
db 0xd5,0xe1,0x46,0x23,0x7e
db 0xc3,0x2d,0x11,0xcd,0x72,0x0d,0xcd,0xb7,0x09,0xd5,0xcd,0x7b,0x07,0x2c,0xcd,0x72
db 0x0d
    call deint
db 0xe3,0x73,0x23,0x72,0xe1,0xc9,0xcd,0x75,0x0d,0xcd,0xb7,0x09
db 0xc5,0x21,0xf9,0x20,0x7a,0xfe,0x00,0x28,0x0c,0xcd,0x82,0x1c,0x78,0xfe,0x30,0x28
db 0x02,0x70,0x23,0x71,0x23,0x7b,0xcd,0x82,0x1c,0x7a,0xfe,0x00,0x20,0x05,0x78,0xfe
db 0x30,0x28,0x02,0x70,0x23,0x71,0x23,0xaf,0x77,0x23,0x77,0xc1,0x21,0xf9,0x20,0xc3
db 0xdb,0x11,0x47,0xe6,0x0f,0xfe,0x0a,0x38,0x02,0xc6,0x07,0xc6,0x30,0x4f,0x78,0x0f
db 0x0f,0x0f,0x0f,0xe6,0x0f,0xfe,0x0a,0x38,0x02,0xc6,0x07,0xc6,0x30,0x47,0xc9,0xeb
db 0x21,0x00,0x00,0xcd,0xb8,0x1c,0xda,0xd8,0x1c,0x18,0x05
hexlp:
    call gethex
    db 0x38,0x1f
    add hl,hl
    add hl,hl
    add hl,hl
    add hl,hl
    or l
    ld l,a
    jr hexlp
;lbl_1cb8:
gethex:
    inc de
    ld a,(de)
    cp 0x20
    db 0xca,0xb8,0x1c,0xd6
    db 0x30,0xd8,0xfe,0x0a,0x38,0x05,0xd6,0x07,0xfe,0x0a,0xd8,0xfe,0x10,0x3f,0xc9,0xeb
    db 0x7a,0x4b,0xe5
    db 0xcd,0x2c,0x11
    pop hl
    ret
db 0x1e,0x26,0xc3,0xc1,0x04
db 0xcd,0x75,0x0d
db 0xcd,0xb7,0x09
db 0xc5,0x21,0xf9,0x20,0x06,0x11,0x05,0x78,0xfe,0x01,0x28,0x08,0xcb
db 0x13,0xcb,0x12,0x30,0xf4,0x18,0x04,0xcb,0x13,0xcb,0x12,0x3e,0x30,0xce,0x00,0x77
db 0x23,0x05,0x20,0xf3,0xaf,0x77,0x23,0x77,0xc1,0x21,0xf9,0x20,0xc3,0xdb,0x11,0xeb
db 0x21,0x00,0x00,0xcd,0x2c,0x1d,0xda,0x3a,0x1d,0xd6,0x30,0x29,0xb5,0x6f,0xcd,0x2c
db 0x1d,0x30,0xf6,0xeb,0x7a,0x4b,0xe5,0xcd,0x2c,0x11,0xe1,0xc9,0x13,0x1a,0xfe,0x20
db 0xca,0x2c,0x1d,0xfe,0x30,0xd8,0xfe,0x32,0x3f,0xc9,0x1e,0x28,0xc3,0xc1,0x04,0xdd
db 0x21,0xff,0xff,0xc3,0x11,0x01,0xc3,0x08,0x00,0xc3,0x00,0x00,0x3e,0x00,0x32,0x5d
db 0x20,0xc3,0x18,0x01,0xed,0x45,0xf5,0xa0,0xc1,0xb8,0x3e,0x00
    ret
    call outc
db 0xc3,0xad,0x0b 


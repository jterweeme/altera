    di
    jp start
    db 0xff,0xff,0xff,0xff,0xc3,0x23,0x00,0xff,0xff,0xff,0xff,0xff
    db 0xc3,0x1b,0x00,0xff,0xff,0xff,0xff,0xff,0xc3,0x2e,0x00
;001b:
rxa:
    call lbl_002e
    db 0x28,0xfb
    in a,(0x81)
    ret
    push af
    in a,(0x80)
    bit 1,a
    db 0x28,0xfa
    pop af
    out (0x81),a
    ret
lbl_002e:
    in a,(0x80)
    and 1
    cp 0
    ret
;0035:
print:
    ld a,(hl)
    or a
    ret z
    rst 8
    inc hl
    jr print
    ret
start:
    ld hl,0x200f
    ld sp,hl
    ld a,0x95
    out (0x80),a
    ld hl,0x7e
    call print
    ld a,(0x2000)
    cp 0x59
    jr nz,coldstart
    ld hl,0x99
    call print
corw:
    call rxa
    and 0xdf
    cp 0x43
    jr nz,checkwarm
    rst 8
    db 0x3e,0x0d
    rst 8
    db 0x3e,0x0a
    rst 8
coldstart:
    ld a,0x59
    db 0x32,0x00,0x20
    db 0xc3,0x00,0x01
checkwarm:
    cp 0x57
    jr nz,corw
    db 0xcf,0x3e,0x0d,0xcf,0x3e,0x0a,0xcf,0xc3,0x03,0x01,0x0c
    db 'Z80 SBC By Grant Searle\r\n'
    db 0x00,0x0d,0x0a,0x43,0x6f,0x6c,0x64,0x20
    db 0x6f,0x72,0x20,0x77,0x61,0x72,0x6d,0x20,0x73,0x74,0x61,0x72,0x74,0x20,0x28,0x43
    db 0x20,0x6f,0x72,0x20,0x57,0x29,0x3f,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    db 0xc3,0x06,0x01,0xc3,0xa4,0x01,0xdd,0x21,0x00,0x00,0xc3,0x11,0x01,0xb7,0x09,0x2d
    db 0x11,0x21,0x10,0x20,0xf9,0xc3,0x4c,0x1d
init:
    ld de,initab
    db 0x06,0x63
    db 0x21,0x10,0x20
copy:
    ld a,(de)
    ld (hl),a
    inc hl
    inc de
    dec b
    jp nz,copy
    ld sp,hl
    call clreg
    call printcrlf
    db 0x32,0xba,0x20
    db 0x32,0x09,0x21
msize:
    ld hl,0x01f3
    call prs
    call prompt
    call getchr
    or a
    jp nz, tstmem
    ld hl,0x216d
mloop:
    inc hl
    ld a,h
    or l
    jp z,settop
    ld a,(hl)
    ld b,a
    cpl
    ld (hl),a
    cp (hl)
    ld (hl),b
    jp z,mloop
    jp settop
tstmem:
    call atoh
    or a
    db 0xc2,0xad,0x04
    ex de, hl
    dec hl
    ld a, 0xd9
    ld b,(hl)
    ld (hl),a
    cp (hl)
    ld (hl),b
    jp nz,msize
settop:
    dec hl
    ld de,0x216c
    call cpdehl
    jp c,msize
    db 0x11,0xce,0xff,0x22,0xbf,0x20
    add hl,de
    ld (0x206a),hl
    call clrptr
    ld hl,(0x206a)
    db 0x11,0xef,0xff,0x19,0x11,0x09,0x21,0x7d,0x93,0x6f
    db 0x7c,0x9a,0x67,0xe5,0x21,0xbc,0x01
    call prs
    db 0xe1
    call prnthl
    db 0x21,0xad
    db 0x01
    call prs
warmst:
    db 0x31,0x76,0x20
brkret:
    call clreg
    jp prntok
    db ' Bytes free\r\n'
    db 0x00,0x00
    db 'Z80 BASIC'
    db 0x20,0x56,0x65,0x72,0x20,0x34,0x2e,0x37,0x62,0x0d,0x0a
    db 'Copyright',0x20,0x28,0x43,0x29
    db ' 1978 by Microsoft\r\n',0,0
    db 'Memory top',0
    db 0x63,0x17
    dw int
    dw abs
    db 0x13,0x20    ;usr
    dw fre
    dw inp
    dw pos
    dw sqr
    dw rnd
    dw log
    dw exp
    dw cos
    dw sin
    dw tan
    dw atn
    dw peek
    dw deek
    db 0x61,0x20    ;point
    dw len
    dw str
    dw val
    dw asc
    dw chr
    dw hex
    dw bin
    dw left
    dw right
    dw mid
    db 0xc5,'ND'
    db 0xc6,'OR'
    db 0xce,'EXT'
    db 0xc4,'ATA'
    db 0xc9,'NPUT'
    db 0xc4,'IM'
    db 0xd2,'EAD'
    db 0xcc,'ET'
    db 0xc7,'OTO'
    db 0xd2,'UN'
    db 0xc9,'F'
    db 0xd2,'ESTORE'
    db 0xc7,'OSUB'
    db 0xd2,'ETURN'
    db 0xd2,'EM'
    db 0xd3,'TOP'
    db 0xcf,'UT'
    db 0xcf,'N'
    db 0xce,'ULL'
    db 0xd7,'AIT'
    db 0xc4,'EF'
    db 0xd0,0x4f,0x4b,0x45
    db 0xc4,0x4f,0x4b,0x45
    db 0xd3,0x43,0x52,0x45,0x45,0x4e
    db 0xcc,'INES'
    db 0xc3,'LS'
    db 0xd7,'ID',0x54,0x48
    db 0xcd,'ONITOR'
    db 0xd3,'ET'
    db 0xd2,'ESET'
    db 0xd0,0x52,0x49,0x4e,0x54
    db 0xc3,0x4f,0x4e,0x54
    db 0xcc,0x49,0x53,0x54
    db 0xc3,0x4c,0x45,0x41
    db 0x52,0xc3,0x4c,0x4f,0x41,0x44
    db 0xc3,0x53,0x41,0x56,0x45,0xce,0x45,0x57
    db 0xd4,0x41
    db 0x42,0x28,0xd4,0x4f,0xc6,0x4e,0xd3,0x50,0x43,0x28,0xd4,0x48,0x45,0x4e,0xce,0x4f
    db 0x54,0xd3,0x54,0x45,0x50,0xab,0xad,0xaa,0xaf,0xde,0xc1,0x4e,0x44,0xcf,0x52,0xbe
    db 0xbd,0xbc,0xd3,0x47,0x4e
    db 0xc9
    db 0x4e,0x54,0xc1,0x42,0x53,0xd5,0x53,0x52,0xc6,0x52
    db 0x45
    db 0xc9
    db 0x4e,0x50,0xd0,0x4f,0x53,0xd3,0x51,0x52,0xd2,0x4e,0x44,0xcc,0x4f,0x47
    db 0xc5,0x58,0x50,0xc3,0x4f,0x53,0xd3,0x49,0x4e,0xd4,0x41,0x4e,0xc1,0x54,0x4e,0xd0
    db 0x45,0x45,0x4b,0xc4,0x45,0x45,0x4b,0xd0,0x4f,0x49,0x4e,0x54,0xcc,0x45,0x4e,0xd3
    db 0x54,0x52,0x24,0xd6,0x41,0x4c,0xc1,0x53,0x43,0xc3,0x48,0x52,0x24,0xc8,0x45,0x58
    db 0x24,0xc2,0x49,0x4e,0x24,0xcc,0x45,0x46,0x54,0x24
    db 0xd2,'IGHT$'
    db 0xcd,'ID$'
    db 0x80
    dw pend
    dw for
    dw next
    dw data
    dw input
    dw dim
    dw read
    dw let
    dw goto
    dw run
    dw if
    dw restor
    dw gosub
    dw return
    dw rem
    dw stop
    dw pout
    dw on
    dw null
    dw wait
    dw def
    dw poke
    dw doke
    dw rem
    dw lines
    dw cls
    dw width
    dw monitr
    db 0x64,0x20    ;pset
    db 0x67,0x20    ;reset
    dw xprint
    dw cont
    dw list
    dw clear
    dw rem
    dw rem
    dw new
pritab:
    db 0x79
    db 0xd5,0x18
    db 0x79,0x09,0x15
    db 0x7c,0x47,0x16
    db 0x7c,0xa8,0x16
    db 0x7f,0xf6,0x19
    db 0x50,0xbc
    db 0x0e
    db 0x46,0xbb,0x0e
errors:
    db 'NFSNRG',0x4f,0x44,0x46,0x43,0x4f,0x56
    db 0x4f,0x4d,0x55,0x4c,0x42,0x53,0x44,0x44,0x2f,0x30,0x49,0x44,0x54,0x4d,0x4f,0x53
    db 0x4c,0x53,0x53,0x54,0x43,0x4e,0x55,0x46,0x4d,0x4f,0x48,0x58,0x42,0x4e
initab:
    db 0xc3,0xa4
    db 0x01,0xc3,0xcc,0x09,0xd3,0x00
    ret
    sub 0
    ld l,a
    ld a,h
    sbc a,0
    db 0x67,0x78,0xde
    db 0x00,0x47,0x3e,0x00
    ret
    db 0x00,0x00,0x00,0x35,0x4a,0xca,0x99,0x39,0x1c,0x76,0x98
    db 0x22,0x95,0xb3,0x98,0x0a,0xdd,0x47,0x98,0x53,0xd1,0x99,0x99,0x0a,0x1a,0x9f,0x98
    db 0x65,0xbc
    db 0xcd,0x98,0xd6
    db 0x77,0x3e,0x98,0x52,0xc7,0x4f,0x80,0xdb,0x00
    ret
    db 0x01
    db 0xff,0x1c,0x00,0x00,0x14,0x00,0x14,0x00,0x00,0x00,0x00,0x00,0xc3,0xf2,0x06,0xc3
    db 0x00,0x00,0xc3,0x00,0x00,0xc3,0x00,0x00,0x6d,0x21,0xfe,0xff,0x0a,0x21,0x20,0x45
    db 0x72,0x72,0x6f,0x72,0x00,0x20,0x69,0x6e,0x20,0x00,0x4f,0x6b
    db 0x0d,0x0a
    db 0x00,0x00
    db "Break",0
;0456:
bakstk:
    db 0x21,0x04,0x00,0x39
;045a
lokfor:
    db 0x7e,0x23,0xfe,0x81,0xc0,0x4e
    db 0x23,0x46,0x23,0xe5,0x69,0x60,0x7a,0xb3,0xeb,0xca,0x70,0x04,0xeb
    call cpdehl
    db 0x01,0x0d,0x00,0xe1,0xc8,0x09,0xc3,0x5a,0x04
;0479:
movup:
    call enfmem
;047c:
movstr:
    push bc
    ex (sp),hl
    pop bc
movlp:
    call cpdehl
    ld a,(hl)
    ld (bc),a
    ret z
    db 0x0b,0x2b
    jp movlp
;048a:
chkstk:
    push hl
    db 0x2a,0xea,0x20,0x06,0x00
    db 0x09,0x09,0x3e
;0493:
enfmem:
    db 0xe5,0x3e,0xd0,0x95,0x6f,0x3e,0xff,0x9c,0xda,0xa2,0x04,0x67,0x39
    db 0xe1,0xd8,0x1e,0x0c,0xc3,0xc1,0x04,0x2a,0xd9,0x20,0x22,0x6c,0x20,0x1e,0x02,0x01
    db 0x1e,0x14,0x01,0x1e,0x00,0x01,0x1e,0x12,0x01,0x1e,0x22,0x01,0x1e,0x0a
    db 0x01
    ld e,0x18
error:
    call clreg
    db 0x32,0x55,0x20
    call sttlin
    ld hl,errors
    ld d,a
    ld a,0x3f
    call outc
    add hl,de
    ld a,(hl)
    call outc
    call getchr
    call outc
    db 0x21,0x3e,0x04
errin:
    call prs
    db 0x2a,0x6c,0x20
    db 0x11,0xfe,0xff
    call cpdehl
    db 0xca,0x11,0x01
    db 0x7c,0xa5,0x3c,0xc4,0xe6,0x18,0x3e,0xc1
prntok:
    xor a
    db 0x32,0x55,0x20
    call sttlin
    db 0x21
    db 0x4a,0x04
    call prs
getcmd:
    ld hl,0xffff
    db 0x22,0x6c,0x20
    call getlin
    jp c,getcmd
    call getchr
    inc a
    dec a
    jp z,getcmd
    push af
    call atoh
    push de
    call crunch
    ld b,a
    pop de
    pop af
    jp nc,excute
    push de
    push bc
    xor a
    db 0x32,0xdc,0x20
    call getchr
    or a
    push af
    call srchln
    db 0xda,0x3e,0x05,0xf1,0xf5,0xca,0x72,0x0a,0xb7,0xc5,0xd2
    db 0x55,0x05,0xeb,0x2a,0xe6,0x20
sftprg:
    ld a,(de)
    ld (bc),a
    inc bc
    inc de
    call cpdehl
    jp nz,sftprg
    ld h,b
    ld l,c
    db 0x22,0xe6,0x20,0xd1,0xf1,0xca,0x7c,0x05,0x2a,0xe6,0x20,0xe3,0xc1,0x09
    db 0xe5
    call movup
    pop hl
    db 0x22,0xe6,0x20,0xeb,0x74,0xd1,0x23,0x23,0x73,0x23,0x72
    db 0x23,0x11,0x71,0x20,0x1a,0x77,0x23,0x13
    or a
    db 0xc2,0x74,0x05
setptr:
    call runfst
    inc hl
    ex de,hl
ptrlp:
    ld h,d
    ld l,e
    ld a,(hl)
    inc hl
    or (hl)
    jp z,getcmd
    inc hl
    inc hl
    inc hl
    xor a
fndend:
    cp (hl)
    inc hl
    jp nz,fndend
    ex de,hl
    ld (hl),e
    inc hl
    ld (hl),d
    jp ptrlp
;0599:
srchln:
    ld hl,(0x206e)
;059c:
srchlp:
    ld b,h
    ld c,l
    ld a,(hl)
    inc hl
    or (hl)
    dec hl
    ret z
    inc hl
    inc hl
    ld a,(hl)
    inc hl
    ld h,(hl)
    ld l,a
    call cpdehl
    ld h,b
    ld l,c
    ld a,(hl)
    inc hl
    ld h,(hl)
    ld l,a
    ccf
    ret z
    ccf
    ret nc
    jp srchlp
;05b9:
new:
    ret nz
;05ba:
clrptr:
    ld hl,(0x206e)
    xor a
    ld (hl),a
    inc hl
    ld (hl),a
    inc hl
    db 0x22,0xe6,0x20
;05c5:
runfst:
    db 0x2a,0x6e,0x20
    dec hl
;05c9
intvar:
    db 0x22,0xde,0x20
    db 0x2a,0xbf,0x20
    db 0x22,0xd3,0x20
    xor a
    call restor
    db 0x2a,0xe6,0x20,0x22,0xe8,0x20,0x22,0xea,0x20
;05df:
clreg:
    db 0xc1
    db 0x2a,0x6a,0x20,0xf9,0x21,0xc3,0x20,0x22,0xc1,0x20
    db 0xaf,0x6f,0x67,0x22,0xe4,0x20
    db 0x32,0xdb,0x20,0x22,0xee,0x20,0xe5,0xc5,0x2a,0xde,0x20,0xc9
;05fc:
prompt:
    ld a,0x3f
    call outc
    ld a,0x20
    call outc
    db 0xc3,0x5e,0x20
;0609:
crunch:
    xor a
    db 0x32,0xbe,0x20,0x0e,0x05,0x11
    db 0x71,0x20,0x7e,0xfe,0x20,0xca,0x91,0x06,0x47,0xfe,0x22,0xca,0xb1,0x06,0xb7,0xca
    db 0xb8,0x06,0x3a,0xbe,0x20,0xb7,0x7e,0xc2,0x91,0x06,0xfe,0x3f,0x3e,0x9e,0xca,0x91
    db 0x06,0x7e,0xfe,0x30,0xda,0x3c,0x06,0xfe,0x3c,0xda,0x91,0x06,0xd5,0x11,0x35,0x02
    db 0xc5,0x01,0x8d,0x06,0xc5,0x06,0x7f,0x7e,0xfe,0x61,0xda,0x55,0x06,0xfe,0x7b,0xd2
    db 0x55,0x06,0xe6,0x5f,0x77,0x4e,0xeb,0x23,0xb6,0xf2,0x57,0x06,0x04,0x7e,0xe6,0x7f
    db 0xc8,0xb9,0xc2,0x57,0x06,0xeb,0xe5,0x13,0x1a,0xb7,0xfa,0x89,0x06,0x4f,0x78,0xfe
    db 0x88
    jp nz,nospc
    call getchr
    dec hl
nospc:
    inc hl
    ld a,(hl)
    cp 0x61
    db 0xda,0x81,0x06,0xe6
    db 0x5f,0xb9,0xca,0x67,0x06,0xe1,0xc3,0x55,0x06,0x48,0xf1,0xeb,0xc9,0xeb,0x79,0xc1
    db 0xd1,0x23,0x12,0x13,0x0c,0xd6,0x3a,0xca,0x9f,0x06,0xfe,0x49,0xc2,0xa2,0x06,0x32
    db 0xbe,0x20,0xd6,0x54,0xc2,0x12,0x06,0x47,0x7e,0xb7,0xca,0xb8,0x06,0xb8,0xca,0x91
    db 0x06,0x23,0x12,0x0c,0x13,0xc3,0xa8,0x06,0x21,0x70,0x20,0x12,0x13,0x12,0x13,0x12
    db 0xc9,0x3a,0x54,0x20,0xb7,0x3e,0x00,0x32,0x54,0x20,0xc2,0xd5,0x06,0x05,0xca,0xf2
    db 0x06
    call outc
    ld a,5
    dec hl
    db 0xca,0xe9,0x06
    ld a,(hl)
    call outc
    db 0xc3,0xfb
    db 0x06,0x05,0x2b
    call outc
    db 0xc2,0xfb,0x06
    call outc
    call printcrlf
    jp getlin
;06f2:
getlin:
    db 0x21,0x71,0x20
    ld b,1
    xor a
    ld (0x2054),a
morinp:
    call clotst
    ld c,a
    cp 0x7f
    db 0xca,0xc1,0x06,0x3a,0x54,0x20,0xb7
    jp z,proces
    ld a,0
    call outc
    xor a
    ld (0x2054),a
proces:
    ld a,c
    cp 7
    db 0xca,0x58,0x07
    cp 3
    db 0xcc,0xad,0x0b,0x37
    db 0xc8,0xfe,0x0d,0xca,0xa8,0x0b,0xfe,0x15,0xca,0xec,0x06,0xfe,0x40,0xca,0xe9,0x06
    db 0xfe,0x5f,0xca,0xe1,0x06,0xfe,0x08,0xca,0xe1,0x06,0xfe,0x12,0xc2,0x53,0x07,0xc5
    db 0xd5,0xe5,0x36,0x00
    call outncr
    db 0x21,0x71,0x20
    call prs
    pop hl
    pop de
    pop bc
    db 0xc3,0xfb,0x06
    cp 0x20
    db 0xda,0xfb,0x06,0x78,0xfe,0x49,0x3e,0x07,0xd2,0x6d,0x07
    db 0x79,0x71,0x32,0xdc,0x20,0x23,0x04
outit:
    call outc
    jp morinp
;outnbs:
    call outc
    ld a,8
    jp outit
;0775:
cpdehl:
    ld a,h
    sub d
    ret nz
    ld a,l
    sub e
    ret
;077b:
chksyn:
    ld a,(hl)
    ex (sp),hl
    db 0xbe,0x23,0xe3
    db 0xca,0x05,0x09,0xc3,0xad,0x04
;0786:
outc:
    push af
    db 0x3a,0x55,0x20
    or a
    db 0xc2,0x80,0x12,0xf1,0xc5
    db 0xf5,0xfe,0x20,0xda,0xaa,0x07,0x3a,0x52,0x20,0x47,0x3a,0xbb,0x20,0x04,0xca,0xa6
    db 0x07,0x05,0xb8,0xcc,0xad,0x0b,0x3c,0x32,0xbb,0x20,0xf1,0xc1
    call monout
    ret
;07b0:
clotst:
    call getinp
    and 0x7f
    cp 0x0f
    db 0xc0,0x3a,0x55,0x20,0x2f,0x32,0x55,0x20
    xor a
    ret
;07c1:
list:
    call atoh
    ret nz
    pop bc
    call srchln
    push bc
    call setlin
listlp:
    pop hl
    ld c,(hl)
    inc hl
    ld b,(hl)
    inc hl
    ld a,b
    or c
    jp z,prntok
    call count
    call tstbrk
    push bc
    call printcrlf
    db 0x5e,0x23,0x56,0x23,0xe5,0xeb
    call prnthl
    db 0x3e,0x20,0xe1
lstlp2:
    call outc
lstlp3:
    ld a,(hl)
    or a
    inc hl
    jp z,listlp
    jp p,lstlp2
    sub 0x7f
    ld c,a
    ld de,0x236
    ld a,(de)
    inc de
    or a
    db 0xf2,0xff,0x07,0x0d,0xc2,0xff,0x07
outwrd:
    and 0x7f
    call outc
    ld a,(de)
    inc de
    or a
    jp p,outwrd
    jp lstlp3
;0817:
setlin:
    db 0xe5,0x2a,0x58,0x20,0x22,0x56,0x20,0xe1,0xc9
;0820:
count:
    push hl
    db 0xd5,0x2a,0x56,0x20,0x11,0xff,0xff,0xed,0x5a,0x22,0x56,0x20,0xd1,0xe1,0xf0
    db 0xe5,0x2a,0x58,0x20,0x22,0x56,0x20
    call getinp
    db 0xfe,0x03,0xca,0x43,0x08,0xe1
    db 0xc3,0x20,0x08,0x2a,0x58,0x20,0x22,0x56,0x20,0xc3,0xa7,0x01
;084c
for:
    ld a,0x64
    ld (0x20db),a
    call let
    pop bc
    push hl
    call data
    db 0x22,0xd7,0x20,0x21,0x02,0x00,0x39
    call lokfor
    db 0xd1,0xc2,0x7c,0x08,0x09,0xd5,0x2b,0x56,0x2b,0x5e,0x23,0x23,0xe5
    db 0x2a,0xd7,0x20
    call cpdehl
    db 0xe1,0xc2,0x60,0x08,0xd1,0xf9,0xeb,0x0e,0x08
    call chkstk
    db 0xe5,0x2a,0xd7,0x20,0xe3,0xe5,0x2a,0x6c,0x20,0xe3
    call tstnum
    call chksyn
    db 0xa6
    call getnum
    push hl
    call bcdefp
    pop hl
    push bc
    db 0xd5,0x01,0x00,0x81
    db 0x51,0x5a,0x7e,0xfe,0xab
    db 0x3e,0x01,0xc2,0xb8,0x08
    call getchr
    call getnum
    push hl
    call bcdefp
    call tstsgn
    pop hl
;savstp:
    push bc
    push de
    push af
    inc sp
    push hl
    db 0x2a,0xde,0x20
    ex (sp),hl
    db 0x06,0x81,0xc5,0x33
;runcnt:
    call tstbrk
    db 0x22,0xde,0x20,0x7e,0xfe,0x3a,0xca,0xe5
    db 0x08,0xb7,0xc2,0xad,0x04,0x23,0x7e,0x23,0xb6,0xca,0x57,0x09,0x23,0x5e,0x23,0x56
    db 0xeb,0x22,0x6c,0x20,0xeb
excute:
    call getchr
    db 0x11,0xc5,0x08,0xd5,0xc8,0xd6,0x80,0xda
    db 0xb3,0x0a,0xfe,0x25,0xd2,0xad,0x04
    rlca
    ld c,a
    ld b,0
    ex de,hl
    db 0x21,0x55,0x03
    add hl,bc
    ld c,(hl)
    inc hl
    ld b,(hl)
    push bc
    ex de,hl
;0905:
getchr:
    inc hl
    ld a,(hl)
    cp 0x3a
    ret nc
    cp 0x20
    jp z,getchr
    cp 0x30
    ccf
    inc a
    dec a
    ret
;0915:
restor:
    ex de,hl
    db 0x2a,0x6e,0x20
    db 0xca,0x2a,0x09
    ex de,hl
    call atoh
    push hl
    call srchln
    ld h,b
    ld l,c
    pop de
    db 0xd2,0x72,0x0a
;restnl:
    dec hl
;updata:
    db 0x22,0xec,0x20
    ex de,hl
    ret
;0930:
tstbrk:
    rst 0x18
    ret z
    rst 0x10
    cp 0x1b
    jr z,brk
    cp 3
    jr z,brk
    cp 0x13
    ret nz
stall:
    rst 0x10
    cp 0x11
    ret z
    cp 3
    jr z,stop
    jr stall
brk:
    ld a,0xff
    ld (0x205d),a
;094d:
stop:
    db 0xc0,0xf6
;094f:
pend:
    ret nz
    db 0x22,0xde,0x20
    db 0x21
inpbrk:
    or 0xff
    pop bc
endprg:
    ld hl,(0x206c)
    push af
    ld a,l
    and h
    inc a
    db 0xca,0x6a,0x09
    db 0x22,0xe2,0x20,0x2a,0xde,0x20,0x22,0xe4,0x20
nolin:
    db 0xaf,0x32,0x55,0x20
    call sttlin
    pop af
    db 0x21,0x50,0x04
    jp nz,errin
    db 0xc3,0xf8,0x04
;097b:
cont:
    db 0x2a,0xe4,0x20,0x7c,0xb5
    db 0x1e,0x20,0xca,0xc1,0x04,0xeb,0x2a,0xe2,0x20,0x22,0x6c,0x20,0xeb,0xc9
;098e:
null:
    call getint
    ret nz
    db 0x32,0x51,0x20
    ret
accsum:
    push hl
    db 0x2a,0x5a,0x20,0x06,0x00,0x4f,0x09,0x22,0x5a
    db 0x20,0xe1,0xc9
;09a3:
chkltr:
    ld a,(hl)
    cp 0x41
    ret c
    cp 0x5b
    ccf
    ret
;09ab:
fpsint:
    call getchr
;09ae:
posint:
    call getnum
depint:
    call tstsgn
    jp m,fcerr
;09b7:
deint:
    ld a,(0x20f7)
    cp 0x90
    db 0xda,0xfc,0x17,0x01
    db 0x80,0x90,0x11,0x00,0x00,0xe5
    call cmpnum
    pop hl
    ld d,c
    ret z
fcerr:
    ld e,8
    jp error
;09d1:
atoh:
    dec hl
;09d2:
getln:
    ld de,0
gtlnlp:
    call getchr
    ret nc
    push hl
    push af
    ld hl,0x1998
    call cpdehl
    db 0xda
    db 0xad,0x04,0x62,0x6b
    add hl,de
    add hl,hl
    add hl,de
    add hl,hl
    pop af
    sub 0x30
    ld e,a
    ld d,0
    add hl,de
    ex de,hl
    pop hl
    jp gtlnlp
;09f6:
clear:
    db 0xca,0xc9,0x05
    call posint
    dec hl
    call getchr
    db 0xe5,0x2a,0xbf,0x20,0xca,0x19,0x0a,0xe1
    call chksyn
    inc l
    push de
    call posint
    dec hl
    call getchr
    db 0xc2,0xad,0x04
    ex (sp),hl
    ex de,hl
stored:
    db 0x7d,0x93,0x5f,0x7c,0x9a,0x57,0xda
    db 0xa2,0x04,0xe5,0x2a,0xe6,0x20,0x01,0x28,0x00,0x09
    call cpdehl
    db 0xd2,0xa2,0x04
    db 0xeb,0x22,0x6a,0x20,0xe1,0x22,0xbf,0x20,0xe1,0xc3,0xc9,0x05
;0a3c
run:
    db 0xca,0xc5,0x05
    call intvar
    db 0x01,0xc5,0x08
    db 0xc3,0x58,0x0a
;0a48
gosub:
    ld c,3
    call chkstk
    pop bc
    push hl
    push hl
    db 0x2a,0x6c,0x20,0xe3,0x3e,0x8c,0xf5,0x33
runlin:
    push bc
;0a59:
goto:
    call atoh
    call rem
    push hl
    ld hl,(0x206c)
    call cpdehl
    pop hl
    inc hl
    call c,srchlp
    call nc,srchln
    ld h,b
    ld l,c
    dec hl
    ret c
ulerr:
    ld e,0xe
    db 0xc3,0xc1,0x04
;0a77:
return:
    ret nz
    ld d,0xff
    call bakstk
    ld sp,hl
    cp 0x8c
    db 0x1e,0x04,0xc2,0xc1,0x04,0xe1,0x22,0x6c,0x20,0x23,0x7c,0xb5,0xc2,0x96,0x0a,0x3a
    db 0xdc,0x20,0xb7,0xc2,0xf7,0x04,0x21,0xc5,0x08,0xe3,0x3e,0xe1
;0a9c:
data:
    db 0x01,0x3a
;0a9e:
rem:
    ld c,0
    db 0x06,0x00,0x79,0x48,0x47,0x7e,0xb7,0xc8,0xb8,0xc8,0x23,0xfe,0x22,0xca,0xa2,0x0a
    db 0xc3,0xa5,0x0a
;0ab3:
let:
    call getvar
    call chksyn
    or h
    push de
    db 0x3a,0xbd,0x20
    push af
    call eval
    pop af
    db 0xe3,0x22,0xde,0x20,0x1f
    call chktyp
    db 0xca,0x06,0x0b
letstr:
    db 0xe5,0x2a
    db 0xf4,0x20,0xe5,0x23,0x23,0x5e,0x23,0x56,0x2a,0x6e,0x20
    call cpdehl
    db 0xd2,0xf5
    db 0x0a,0x2a,0x6a,0x20
    call cpdehl
    pop de
    db 0xd2,0xfd,0x0a,0x21,0xcf,0x20
    call cpdehl
    db 0xd2,0xfd,0x0a,0x3e
crestr:
    pop de
    call baktmp
    ex de,hl
    call savstr
mvstpt:
    call baktmp
    pop hl
    call dethl4
    pop hl
    ret
letnum:
    push hl
    call fpthl
    pop de
    pop hl
    ret
;0b0d
on:
    call getint
    ld a,(hl)
    ld b,a
    cp 0x8c
    jp z,ongo
    call chksyn
    adc a,b
    dec hl
ongo:
    db 0x4b,0x0d,0x78,0xca
    db 0xed,0x08
    call getln
    cp 0x2c
    db 0xc0,0xc3,0x1d,0x0b
;0b2b
if:
    call eval
    ld a,(hl)
    cp 0x88
    jp z,ifgo
    call chksyn
    db 0xa9
    dec hl
ifgo:
    call tstnum
    call tstsgn
    db 0xca
    db 0x9e,0x0a
    call getchr
    db 0xda,0x59,0x0a
    db 0xc3,0xec,0x08,0x2b
    call getchr
;0b4f
xprint:
    db 0xca
    db 0xad,0x0b
printlp:
    ret z
    cp 0xa5
    db 0xca,0xe0,0x0b,0xfe,0xa8,0xca,0xe0,0x0b,0xe5,0xfe,0x2c
    db 0xca,0xc9,0x0b,0xfe,0x3b,0xca,0x03,0x0c,0xc1
    call eval
    push hl
    ld a,(0x20bd)
    or a
    jp nz,prntst
    call numasc
    call crtst
    db 0x36,0x20,0x2a,0xf4,0x20,0x34
    db 0x2a,0xf4,0x20,0x3a,0x52,0x20,0x47,0x04,0xca,0x95,0x0b,0x04,0x3a,0xbb,0x20,0x86
    db 0x3d,0xb8,0xd4,0xad,0x0b
prntnb:
    call prs1
    xor a
prntst:
    call nz,prs1
    pop hl
    db 0xc3,0x4b,0x0b
;0ba0
sttlin:
    ld a,(0x20bb)
    db 0xb7,0xc8,0xc3,0xad,0x0b
endinp:
    db 0x36,0x00,0x21,0x70,0x20
;0bad
printcrlf:
    ld a,0xd
    call outc
    ld a,0xa
    call outc
donull:
    xor a
    db 0x32,0xbb,0x20
    db 0x3a,0x51,0x20
nullp:
    dec a
    ret z
    push af
    xor a
    call outc
    pop af
    jp nullp
docom:
    ld a,(0x2053)
    ld b,a
    ld a,(0x20bb)
    cp b
    call nc,printcrlf
    db 0xd2,0x03,0x0c,0xd6,0x0e,0xd2,0xd7,0x0b,0x2f,0xc3,0xf8,0x0b
dotab:
    push af
    call fndnum
    call chksyn
    db 0x29,0x2b,0xf1,0xd6,0xa8,0xe5,0xca,0xf3,0x0b
    db 0x3a,0xbb,0x20,0x2f,0x83,0xd2,0x03,0x0c,0x3c,0x47,0x3e,0x20
spclp:
    call outc
    dec b
    jp nz,spclp
nexitm:
    db 0xe1
    call getchr
    db 0xc3,0x52,0x0b,0x3f
    db 'Redo '
    db 0x66,0x72,0x6f,0x6d,0x20,0x73,0x74,0x61,0x72,0x74,0x0d,0x0a,0x00,0x3a,0xdd,0x20
    db 0xb7,0xc2,0xa7,0x04,0xc1,0x21,0x0a,0x0c
    call prs
    db 0xc3,0xf8,0x05
;0c2e
input:
    call idtest
    ld a,(hl)
    cp 0x22
    ld a,0
    db 0x32,0x55,0x20
    jp nz,nopmpt
    call qtstr
    call chksyn
    dec sp
    push hl
    call prs1
    db 0x3e
nopmpt:
    push hl
    call prompt
    pop bc
    jp c,inpbrk
    db 0x23,0x7e,0xb7,0x2b,0xc5,0xca,0x9b,0x0a,0x36,0x2c,0xc3,0x62,0x0c
;0c5d
read:
    db 0xe5,0x2a,0xec
    db 0x20,0xf6
nxtitm:
    xor a
    ld (0x20dd),a
    ex (sp),hl
    jp gtvlus
nedmor:
    call chksyn
    inc l
gtvlus:
    call getvar
    db 0xe3,0xd5,0x7e,0xfe,0x2c
    jp z,antvlu
    db 0x3a,0xdd,0x20,0xb7,0xc2,0x03,0x0d
    db 0x3e,0x3f
    call outc
    call prompt
    pop de
    pop bc
    jp c,inpbrk
    db 0x23,0x7e,0xb7
    db 0x2b,0xc5,0xca,0x9b,0x0a,0xd5
antvlu:
    db 0x3a,0xbd,0x20
    or a
    jp z,inpbin
    call getchr
    ld d,a
    ld b,a
    cp 0x22
    db 0xca,0xb4,0x0c
    db 0x3a,0xdd,0x20,0xb7,0x57,0xca,0xb1,0x0c,0x16
    db 0x3a,0x06,0x2c,0x2b
strent:
    call dtstr
    ex de,hl
    db 0x21,0xcb,0x0c,0xe3,0xd5,0xc3,0xce,0x0a
inpbin:
    call getchr
    call asctfp
    ex (sp),hl
    call fpthl
    pop hl
ltstnd:
    dec hl
    call getchr
    jp z,mordt
    cp 0x2c
    db 0xc2,0x1d,0x0c
mordt:
    db 0xe3,0x2b
    call getchr
    db 0xc2,0x6a,0x0c,0xd1
    db 0x3a,0xdd,0x20,0xb7,0xeb,0xc2,0x2b,0x09,0xd5,0xb6,0x21,0xf2,0x0c,0xc4,0x4b,0x12
    db 0xe1,0xc9,0x3f,0x45,0x78,0x74,0x72,0x61,0x20,0x69,0x67,0x6e,0x6f,0x72,0x65,0x64
    db 0x0d,0x0a,0x00
fdtlp:
    call data
    db 0xb7,0xc2,0x1c,0x0d,0x23,0x7e,0x23,0xb6,0x1e,0x06
    db 0xca,0xc1,0x04,0x23,0x5e,0x23,0x56,0xeb,0x22,0xd9,0x20,0xeb
fandt:
    call getchr
    cp 0x83
    jp nz,fdtlp
    jp antvlu
;0d27
next:
    ld de,0
;0d2a
next1:
    db 0xc4,0x68,0x0f,0x22,0xde,0x20
    call bakstk
    db 0xc2,0xb3,0x04,0xf9,0xd5,0x7e,0x23,0xf5,0xd5
    call phltfp
    ex (sp),hl
    push hl
    call addphl
    pop hl
    call fpthl
    pop hl
    call loadfp
    push hl
    call cmpnum
    db 0xe1,0xc1,0x90
    call loadfp
    jp z,kilfor
    ex de,hl
    db 0x22,0x6c,0x20
    ld l,c
    ld h,b
    db 0xc3
    db 0xc1,0x08
kilfor:
    db 0xf9,0x2a,0xde,0x20,0x7e
    cp 0x2c
    db 0xc2,0xc5,0x08
    call getchr
    call next1
;0d72:
getnum:
    call eval
;0d75
tstnum:
    db 0xf6
;0d76;
tststr:
    scf
;0d77:
chktyp:
    ld a,(0x20bd)
    adc a,a
    or a
    ret pe
    db 0xc3,0xbf,0x04
;0d80
opnpar:
    call chksyn
    db 0x28
;0d84:
eval:
    dec hl
    ld d,0
;0d87:
eval1:
    push de
    ld c,1
    call chkstk
    call oprnd
eval2:
    ld (0x20e0),hl
eval3:
    ld hl,(0x20e0)
    pop bc
    ld a,b
    cp 0x78
    call nc,tstnum
    ld a,(hl)
    ld d,0
rltlp:
    db 0xd6,0xb3,0xda,0xbc,0x0d,0xfe,0x03,0xd2,0xbc,0x0d,0xfe,0x01,0x17,0xaa,0xba,0x57
    db 0xda,0xad,0x04,0x22,0xd5,0x20
    call getchr
    jp rltlp
foprnd:
    db 0x7a,0xb7,0xc2,0xe3
    db 0x0e,0x7e,0x22,0xd5,0x20,0xd6,0xac,0xd8,0xfe,0x07,0xd0,0x5f,0x3a,0xbd,0x20,0x3d
    db 0xb3,0x7b,0xca,0x41,0x13,0x07,0x83,0x5f,0x21,0x9f,0x03,0x19,0x78,0x56,0xba,0xd0
    db 0x23
    call tstnum
stkths:
    push bc
    db 0x01,0x93,0x0d,0xc5,0x43,0x4a
    call stakfp
    ld e,b
    ld d,c
    ld c,(hl)
    inc hl
    ld b,(hl)
    db 0x23,0xc5,0x2a,0xd5,0x20,0xc3,0x87,0x0d
;0dfb:
oprnd:
    xor a
    ld (0x20bd),a
    call getchr
    db 0x1e,0x24,0xca,0xc1,0x04,0xda,0x5b,0x18
    call chkltr
    db 0xd2,0x62,0x0e
    db 0xfe,0x26,0x20,0x12
    call getchr
    cp 0x48
    db 0xca,0x9f,0x1c,0xfe,0x42,0xca,0x0f
    db 0x1d,0x1e,0x02,0xca,0xc1,0x04,0xfe,0xac,0xca,0xfb,0x0d,0xfe,0x2e,0xca,0x5b,0x18
    db 0xfe,0xad,0xca,0x51,0x0e,0xfe,0x22,0xca,0x0a,0x12,0xfe,0xaa,0xca,0x43,0x0f,0xfe
    db 0xa7,0xca,0x6e,0x11,0xd6,0xb6,0xd2,0x73,0x0e
;0e49
evlpar:
    call opnpar
    call chksyn
    db 0x29
    ret
minus:
    ld d,0x7d
    call eval1
    db 0x2a,0xe0,0x20,0xe5
    call invsgn
retnum:
    call tstnum
    pop hl
    ret
convar:
    call getvar
frmevl:
    push hl
    ex de,hl
    ld (0x20f4),hl
    db 0x3a,0xbd,0x20,0xb7,0xcc,0x92
    db 0x17
    pop hl
    ret
fnofst:
    db 0x06,0x00,0x07,0x4f,0xc5
    call getchr
    db 0x79,0xfe,0x31,0xda,0x9a
    db 0x0e
    call opnpar
    call chksyn
    db 0x2c
    call tststr
    db 0xeb,0x2a,0xf4,0x20,0xe3
    db 0xe5,0xeb
    call getint
    db 0xeb,0xe3,0xc3,0xa2,0x0e
fnval:
    call evlpar
    ex (sp),hl
    db 0x11,0x5d,0x0e
    push de
gofunc:
    db 0x01,0xfe,0x01
    add hl,bc
    db 0x4e,0x23,0x66,0x69,0xe9
;0eab:
sgnexp:
    dec d
    cp 0xad
    db 0xc8,0xfe
    db 0x2d,0xc8,0x14,0xfe,0x2b,0xc8,0xfe,0xac
    ret z
    dec hl
    ret
por:
    db 0xf6
pand:
    xor a
    push af
    call tstnum
    call deint
    pop af
    ex de,hl
    db 0xc1,0xe3,0xeb
    call fpbcde
    push af
    call deint
    pop af
    pop bc
    ld a,c
    db 0x21,0x2c,0x11,0xc2,0xde,0x0e,0xa3,0x4f,0x78,0xa2,0xe9,0xb3,0x4f
    db 0x78,0xb2,0xe9,0x21,0xf5,0x0e,0x3a,0xbd,0x20,0x1f,0x7a,0x17,0x5f,0x16,0x64,0x78
    db 0xba,0xd0,0xc3,0xe4,0x0d,0xf7,0x0e,0x79,0xb7,0x1f,0xc1,0xd1,0xf5
    call chktyp
    db 0x21,0x39,0x0f,0xe5,0xca,0xcf,0x17,0xaf,0x32,0xbd,0x20,0xd5
    call gstrcu
    db 0x7e
    db 0x23,0x23,0x4e,0x23,0x46,0xd1,0xc5,0xf5
    call gstrde
    call loadfp
    db 0xf1,0x57
    db 0xe1,0x7b,0xb2,0xc8,0x7a,0xd6,0x01,0xd8,0xaf,0xbb,0x3c,0xd0,0x15,0x1d,0x0a,0xbe
    db 0x23,0x03,0xca,0x21,0x0f,0x3f,0xc3,0x5f,0x17,0x3c,0x8f,0xc1,0xa0,0xc6,0xff,0x9f
    jp flgrel
evnot:
    ld d,0x5a
    call eval1
    call tstnum
    call deint
    ld a,e
    cpl
    ld c,a
    ld a,d
    cpl
    call acpass
    pop bc
    db 0xc3,0x93,0x0d
dimret:
    db 0x2b
    call getchr
    ret z
    call chksyn
    inc l
;0f63:
dim:
    ld bc,dimret
    push bc
    db 0xf6
;0f68:
getvar:
    xor a
    db 0x32,0xbc,0x20,0x46
;0f6d
gtfnam:
    call chkltr
    db 0xda,0xad,0x04,0xaf,0x4f,0x32,0xbd,0x20
    call getchr
    jp c,svnam2
    call chkltr
    jp c,charty
svnam2:
    ld c,a
endnam:
    call getchr
    jp c,endnam
    call chkltr
    db 0xd2,0x85
    db 0x0f
charty:
    sub 0x24
    jp nz,notstr
    inc a
    db 0x32,0xbd,0x20,0x0f,0x81,0x4f
    call getchr
notstr:
    ld a,(0x20db)
    dec a
    db 0xca,0x4d,0x10,0xf2,0xb0,0x0f,0x7e,0xd6,0x28,0xca,0x25,0x10
nscfor:
    xor a
    db 0x32,0xdb,0x20,0xe5,0x50,0x59,0x2a,0xee,0x20
    call cpdehl
    db 0x11,0xf0,0x20
    db 0xca,0x95,0x16,0x2a,0xe8,0x20,0xeb,0x2a,0xe6,0x20
fndvar:
    call cpdehl
    jp z,cfeval
    db 0x79,0x96,0x23,0xc2,0xd8,0x0f,0x78,0x96,0x23,0xca,0x17,0x10,0x23,0x23,0x23,0x23
    jp fndvar
cfeval:
    pop hl
    ex (sp),hl
    push de
    db 0x11,0x65,0x0e
    call cpdehl
    db 0xd1,0xca,0x1a,0x10
    db 0xe3,0xe5,0xc5,0x01,0x06,0x00,0x2a,0xea,0x20,0xe5,0x09,0xc1,0xe5
    call movup
    pop hl
    db 0x22,0xea,0x20
    db 0x60,0x69,0x22,0xe8,0x20
zerolp:
    dec hl
    db 0x36,0x00
    call cpdehl
    jp nz,zerolp
    db 0xd1,0x73,0x23,0x72,0x23
retadr:
    ex de,hl
    pop hl
    ret
retnul:
    db 0x32,0xf7,0x20,0x21,0x49,0x04
    db 0x22,0xf4,0x20,0xe1,0xc9
sbscpt:
    push hl
    db 0x2a,0xbc,0x20,0xe3,0x57,0xd5,0xc5
    call fpsint
    db 0xc1,0xf1,0xeb,0xe3,0xe5,0xeb,0x3c,0x57,0x7e,0xfe,0x2c,0xca,0x2b,0x10
    call chksyn
    db 0x29,0x22,0xe0,0x20,0xe1,0x22,0xbc,0x20,0x1e,0x00,0xd5,0x11
arldsv:
    push hl
    push af
    db 0x2a
    db 0xe8,0x20,0x3e
fndary:
    add hl,de
    ex de,hl
    db 0x2a,0xea,0x20
    ex de,hl
    call cpdehl
    jp z,creary
    db 0x7e
    db 0xb9,0x23,0xc2,0x67,0x10,0x7e,0xb8,0x23,0x5e,0x23,0x56,0x23,0xc2,0x53,0x10,0x3a
    db 0xbc,0x20,0xb7,0xc2,0xb6,0x04,0xf1,0x44,0x4d,0xca,0x95,0x16,0x96,0xca,0xe3,0x10
    db 0x1e,0x10,0xc3,0xc1,0x04
creary:
    db 0x11,0x04,0x00,0xf1,0xca,0xcc,0x09,0x71,0x23,0x70,0x23
    db 0x4f
    call chkstk
    inc hl
    inc hl
    ld (0x20d5),hl
    ld (hl),c
    db 0x23,0x3a,0xbc,0x20,0x17,0x79
crarlp:
    ld bc,0xb
    jp nc,defsiz
    pop bc
    inc bc
defsiz:
    db 0x71,0x23,0x70,0x23,0xf5,0xe5
    call mldebc
    db 0xeb,0xe1,0xf1,0x3d,0xc2,0xa0,0x10,0xf5,0x42,0x4b,0xeb,0x19,0xda,0xa2,0x04
    call enfmem
    db 0x22,0xea,0x20
zerary:
    dec hl
    ld (hl),0
    call cpdehl
    jp nz,zerary
    db 0x03
    db 0x57,0x2a,0xd5,0x20,0x5e,0xeb,0x29,0x09,0xeb,0x2b,0x2b,0x73,0x23,0x72,0x23,0xf1
    db 0xda,0x07,0x11,0x47,0x4f
    ld a,(hl)
    inc hl
    db 0x16
fndelp:
    db 0xe1,0x5e,0x23,0x56,0x23,0xe3,0xf5
    call cpdehl
    db 0xd2,0x80,0x10,0xe5
    call mldebc
    pop de
    add hl,de
    pop af
    dec a
    ld b,h
    ld c,l
    db 0xc2
    db 0xe8,0x10
    add hl,hl
    add hl,hl
    pop bc
    add hl,bc
    ex de,hl
enddim:
    ld hl,(0x20e0)
    ret
;110b
fre:
    db 0x2a,0xea,0x20,0xeb,0x21
    db 0x00,0x00,0x39,0x3a,0xbd,0x20,0xb7,0xca,0x27,0x11
    call gstrcu
    call garbge
    db 0x2a,0x6a,0x20,0xeb,0x2a,0xd3,0x20
frenum:
    ld a,l
    sub e
    ld c,a
    ld a,h
    sbc a,d
;112c
acpass:
    ld b,c
abpass:
    ld d,b
    ld e,0
    ld hl,0x20bd
    ld (hl),e
    db 0x06,0x90,0xc3,0x6b,0x17
;1139
pos:
    db 0x3a,0xbb,0x20
passa:
    ld b,a
    xor a
    jp abpass
;1141
def:
    call chekfn
    call idtest
    db 0x01,0x9c,0x0a,0xc5,0xd5
    call chksyn
    db 0x28
    call getvar
    db 0xe5,0xeb,0x2b,0x56,0x2b,0x5e,0xe1
    call tstnum
    call chksyn
    add hl,hl
    call chksyn
    db 0xb4,0x44,0x4d,0xe3,0x71,0x23,0x70,0xc3,0x03,0x12
dofn:
    call chekfn
    push de
    call evlpar
    call tstnum
    db 0xe3,0x5e,0x23,0x56,0x23,0x7a,0xb3,0xca
    db 0xb9,0x04,0x7e,0x23,0x66,0x6f,0xe5,0x2a,0xee,0x20,0xe3,0x22,0xee,0x20,0x2a,0xf2
    db 0x20,0xe5,0x2a,0xf0,0x20,0xe5,0x21,0xf0,0x20,0xd5
    call fpthl
    pop hl
    call getnum
    dec hl
    call getchr
    db 0xc2,0xad,0x04,0xe1,0x22,0xf0,0x20,0xe1,0x22,0xf2,0x20
    db 0xe1
    ld (0x20ee),hl
    pop hl
    ret
;11b6
idtest:
    push hl
    db 0x2a,0x6c,0x20,0x23,0x7c,0xb5,0xe1,0xc0,0x1e
    db 0x16,0xc3,0xc1,0x04
;11c4
chekfn:
    call chksyn
    db 0xa7,0x3e,0x80,0x32,0xdb,0x20,0xb6,0x47
    call gtfnam
    jp tstnum
;11d5:
str:
    call tstnum
    call numasc
str1:
    call crtst
    call gstrcu
    db 0x01,0xe9,0x13
    push bc
;11e5
savstr:
    ld a,(hl)
    inc hl
    inc hl
    push hl
    call testr
    db 0xe1,0x4e,0x23,0x46
    call crtmst
    push hl
    ld l,a
    call tostra
    pop de
    ret
;11fa
mktmst:
    call testr
;11fd
crtmst:
    ld hl,0x20cf
    push hl
    ld (hl),a
    inc hl
svstad:
    inc hl
    ld (hl),e
    inc hl
    ld (hl),d
    pop hl
    ret
;1209:
crtst:
    dec hl
;120a
qtstr:
    ld b,0x22
    ld d,b
;120d
dtstr:
    push hl
    ld c,0xff
qtstlp:
    inc hl
    ld a,(hl)
    inc c
    or a
    db 0xca,0x1f,0x12,0xba,0xca,0x1f,0x12,0xb8,0xc2,0x10,0x12
crtste:
    cp 0x22
    call z,getchr
    ex (sp),hl
    inc hl
    db 0xeb,0x79
    call crtmst
tstopl:
    db 0x11,0xcf,0x20,0x2a,0xc1
    db 0x20,0x22,0xf4,0x20,0x3e,0x01,0x32,0xbd,0x20
    call dethl4
    call cpdehl
    db 0x22
    db 0xc1,0x20,0xe1,0x7e,0xc0,0x1e,0x1e,0xc3,0xc1,0x04
prnums:
    inc hl
;124b
prs:
    call crtst
;124e
prs1:
    call gstrcu
    call loadfp
    inc e
prslp:
    dec e
    ret z
    ld a,(bc)
    call outc
    cp 0x0d
    db 0xcc,0xb7,0x0b
    db 0x03,0xc3,0x55,0x12
;1264:
testr:
    or a
    db 0x0e
grbdon:
    pop af
    push af
    db 0x2a,0x6a,0x20,0xeb,0x2a,0xd3,0x20,0x2f
    db 0x4f,0x06,0xff,0x09,0x23
    call cpdehl
    db 0xda,0x82,0x12,0x22,0xd3,0x20
    inc hl
    ex de,hl
popaf:
    pop af
    ret
testos:
    pop af
    ld e,0x1a
    jp z,error
    cp a
    push af
    ld bc,grbdon
    push bc
;128e
garbge:
    ld hl,(0x20bf)
garblp:
    ld (0x20d3),hl
    ld hl,0
    db 0xe5,0x2a,0x6a,0x20,0xe5,0x21,0xc3,0x20
grblp:
    ex de,hl
    ld hl,(0x20c1)
    ex de,hl
    call cpdehl
    ld bc,grblp
    db 0xc2,0xf3,0x12,0x2a,0xe6,0x20
smpvar:
    ex de,hl
    ld hl,(0x20e8)
    ex de,hl
    call cpdehl
    db 0xca,0xc6,0x12,0x7e,0x23,0x23,0xb7
    call stradd
    jp smpvar
gnxary:
    pop bc
arrlp:
    ex de,hl
    ld hl,(0x20ea)
    ex de,hl
    call cpdehl
    db 0xca,0x1c
    db 0x13
    call loadfp
    ld a,e
    push hl
    add hl,bc
    or a
    jp p,gnxary
    ld (0x20d5),hl
    pop hl
    ld c,(hl)
    ld b,0
    add hl,bc
    add hl,bc
    inc hl
grbary:
    db 0xeb,0x2a,0xd5,0x20,0xeb
    call cpdehl
    db 0xca,0xc6,0x12
    ld bc,grbary
stpool:
    push bc
    or 0x80
;12f6
stradd:
    ld a,(hl)
    inc hl
    inc hl
    db 0x5e,0x23,0x56,0x23,0xf0,0xb7,0xc8
    db 0x44,0x4d,0x2a,0xd3,0x20
    call cpdehl
    ld h,b
    ld l,c
    ret c
    pop hl
    ex (sp),hl
    call cpdehl
    ex (sp),hl
    push hl
    ld h,b
    ld l,c
    ret nc
    pop bc
    pop af
    pop af
    push hl
    push de
    push bc
    ret
scnend:
    pop de
    pop hl
    ld a,l
    or h
    ret z
    db 0x2b,0x46,0x2b,0x4e,0xe5,0x2b,0x2b,0x6e,0x26,0x00,0x09,0x50,0x59,0x2b,0x44
    db 0x4d,0x2a,0xd3,0x20
    call movstr
    pop hl
    ld (hl),c
    inc hl
    ld (hl),b
    ld l,c
    ld h,b
    dec hl
    db 0xc3,0x91
    db 0x12
concat:
    push bc
    push hl
    ld hl,(0x20f4)
    ex (sp),hl
    call oprnd
    ex (sp),hl
    call tststr
    ld a,(hl)
    push hl
    db 0x2a,0xf4,0x20,0xe5,0x86,0x1e,0x1c,0xda,0xc1,0x04
    call mktmst
    db 0xd1
    call gstrde
    db 0xe3
    call gstrhl
    db 0xe5,0x2a,0xd1,0x20,0xeb
    call sstsa
    call sstsa
    db 0x21,0x90,0x0d,0xe3,0xe5,0xc3,0x2b,0x12
;1378
sstsa:
    pop hl
    ex (sp),hl
    ld a,(hl)
    inc hl
    inc hl
    ld c,(hl)
    inc hl
    ld b,(hl)
    ld l,a
;1381
tostra:
    inc l
tsalp:
    dec l
    ret z
    ld a,(bc)
    ld (de),a
    inc bc
    inc de
    jp tsalp
;138b
getstr:
    call tststr
;138e
gstrcu:
    ld hl,(0x20f4)
;1391
gstrhl:
    ex de,hl
;1392
gstrde:
    call baktmp
    ex de,hl
    ret nz
    push de
    ld d,b
    ld e,c
    dec de
    db 0x4e,0x2a,0xd3,0x20
    call cpdehl
    db 0xc2,0xaa,0x13,0x47,0x09,0x22,0xd3,0x20,0xe1,0xc9
;13ac
baktmp:
    db 0x2a,0xc1,0x20,0x2b
    db 0x46,0x2b,0x4e,0x2b,0x2b
    call cpdehl
    db 0xc0,0x22,0xc1,0x20,0xc9
;13bd
len:
    ld bc,passa
    push bc
;13c1
getlen:
    call getstr
    xor a
    ld d,a
    ld (0x20bd),a
    ld a,(hl)
    or a
    ret
;13cc
asc:
    ld bc,passa
    push bc
gtflnm:
    call getlen
    db 0xca,0xcc,0x09,0x23,0x23,0x5e,0x23,0x56,0x1a
    ret
;13dd
chr:
    ld a,1
    call mktmst
    call makint
    db 0x2a,0xd1,0x20,0x73,0xc1,0xc3,0x2b,0x12
;13ed
left:
    call lfrgnm
    xor a
right1:
    ex (sp),hl
    ld c,a
    db 0xe5,0x7e,0xb8,0xda,0xfb,0x13,0x78,0x11,0x0e,0x00,0xc5
    call testr
    db 0xc1,0xe1,0xe5,0x23,0x23,0x46,0x23,0x66,0x68,0x06,0x00,0x09,0x44,0x4d
    call crtmst
    ld l,a
    call tostra
    pop de
    call gstrde
    db 0xc3,0x2b,0x12
;141d
right:
    call lfrgnm
    db 0xd1,0xd5,0x1a,0x90,0xc3,0xf1,0x13
;1427
mid:
    ex de,hl
    ld a,(hl)
    call midnum
    inc b
    dec b
    db 0xca,0xcc
    db 0x09,0xc5,0x1e,0xff,0xfe,0x29
    jp z,rststr
    call chksyn
    db 0x2c
    call getint
rststr:
    call chksyn
    db 0x29,0xf1,0xe3,0x01,0xf3,0x13,0xc5,0x3d,0xbe,0x06,0x00,0xd0,0x4f
    db 0x7e,0x91,0xbb,0x47,0xd8
    ld b,e
    ret
;1457:
val:
    call getlen
    db 0xca,0x74,0x15,0x5f,0x23,0x23
    db 0x7e,0x23,0x66,0x6f,0xe5,0x19,0x46,0x72,0xe3,0xc5,0x7e,0xfe,0x24,0xc2,0x75,0x14
    call hextfp
    jr val3
val1:
    db 0xfe,0x25,0xc2,0x7f,0x14
    call bintfp
    db 0x18,0x03
val2:
    call asctfp
val3:
    db 0xc1,0xe1,0x70,0xc9
;1486
lfrgnm:
    ex de,hl
    call chksyn
    db 0x29
;148b
midnum:
    db 0xc1,0xd1,0xc5,0x43,0xc9
;1490:
inp:
    call makint
    ld (0x204f),a
    call 0x204e
    jp passa
;149c:
pout:
    call setio
    db 0xc3,0x16,0x20
;14a2:
wait:
    call setio
    push af
    ld e,0
    dec hl
    call getchr
    jp z,noxor
    call chksyn
    db 0x2c
    call getint
noxor:
    pop bc
waitlp:
    call 0x204e
    db 0xab,0xa0,0xca,0xb7,0x14
    ret
;14c0:
setio:
    call getint
    ld (0x204f),a
    ld (0x2017),a
    call chksyn
    db 0x2c
    jp getint
;14d0
fndnum:
    call getchr
;14d3:
getint:
    call getnum
;14d6
makint:
    call depint
    ld a,d
    or a
    db 0xc2,0xcc,0x09,0x2b
    call getchr
    ld a,e
    ret
;14e4:
peek:
    call deint
    ld a,(de)
    db 0xc3,0x3c,0x11
;14eb:
poke:
    call getnum
    call deint
    push de
    call chksyn
    db 0x2c
    call getint
    db 0xd1,0x12,0xc9
;14fc
round:
    db 0x21,0xd2,0x19
;14ff
addphl:
    call loadfp
    db 0xc3,0x0e,0x15
;1505:
subphl:
    call loadfp
    db 0x21
psub:
    db 0xc1,0xd1
;150b
subcde:
    call invsgn
;150e:
fpadd:
    db 0x78,0xb7
    db 0xc8,0x3a,0xf7,0x20,0xb7,0xca,0x95,0x17,0x90,0xd2,0x28,0x15,0x2f,0x3c,0xeb
    call stakfp
    ex de,hl
    call fpbcde
    db 0xc1,0xd1
noswap:
    cp 24+1
    ret nc
    push af
    call signs
    db 0x67
    db 0xf1
    call scale
    db 0xb4,0x21,0xf4,0x20,0xf2,0x4e,0x15
    call plucde
    db 0xd2,0x94
    db 0x15,0x23,0x34,0xca,0xbc,0x04,0x2e,0x01
    call shrt1
    db 0xc3,0x94,0x15
mincde:
    xor a
    sub b
    ld b,a
    db 0x7e,0x9b,0x5f,0x23,0x7e,0x9a,0x57,0x23,0x7e,0x99,0x4f
;155c
conpos:
    db 0xdc,0xbf,0x15
;155f
bnorm:
    ld l,b
    ld h,e
    xor a
bnrmlp:
    ld b,a
    ld a,c
    or a
    db 0xc2,0x81,0x15,0x4a,0x54,0x65,0x6f,0x78,0xd6,0x08,0xfe
    db 0xe0,0xc2,0x62,0x15
;1574
reszer:
    xor a
savexp:
    ld (0x20f7),a
    ret
normal:
    dec b
    add hl,hl
    ld a,d
    rla
    ld d,a
    ld a,c
    adc a,a
    ld c,a
pnorm:
    jp p,normal
    ld a,b
    ld e,h
    ld b,l
    or a
    jp z,rondup
    db 0x21,0xf7,0x20,0x86,0x77
    db 0xd2,0x74,0x15,0xc8
rondup:
    ld a,b
rondb:
    ld hl,0x20f7
    or a
    call m,fprond
    db 0x46,0x23,0x7e,0xe6
    db 0x80,0xa9,0x4f,0xc3,0x95,0x17
fprond:
    db 0x1c,0xc0,0x14,0xc0,0x0c,0xc0,0x0e,0x80,0x34,0xc0
    db 0xc3,0xbc,0x04
;15b3
plucde:
    ld a,(hl)
    add a,e
    ld e,a
    inc hl
    ld a,(hl)
    adc a,d
    ld d,a
    inc hl
    ld a,(hl)
    adc a,c
    ld c,a
    ret
compl:
    ld hl,0x20f8
    ld a,(hl)
    cpl
    ld (hl),a
    xor a
    ld l,a
    sub b
    ld b,a
    ld a,l
    sbc a,e
    ld e,a
    ld a,l
    sbc a,d
    ld d,a
    ld a,l
    sbc a,c
    ld c,a
    ret
;15d3
scale:
    ld b,0
scallp:
    sub 8
    db 0xda,0xe2,0x15,0x43,0x5a,0x51,0x0e,0x00,0xc3
    db 0xd5,0x15,0xc6,0x09,0x6f
shrlp:
    xor a
    dec l
    ret z
    ld a,c
;15e9
shrt1:
    rra
    db 0x4f,0x7a,0x1f,0x57,0x7b,0x1f
    db 0x5f,0x78,0x1f,0x47,0xc3,0xe5,0x15,0x00,0x00,0x00,0x81,0x03,0xaa,0x56,0x19,0x80
    db 0xf1,0x22,0x76,0x80,0x45,0xaa,0x38,0x82
;1608:
log:
    call tstsgn
    or a
    db 0xea,0xcc,0x09,0x21
    db 0xf7,0x20,0x7e,0x01,0x35,0x80,0x11,0xf3,0x04,0x90,0xf5,0x70,0xd5,0xc5
    call fpadd
    db 0xc1,0xd1,0x04
    call dvbcde
    db 0x21,0xf7,0x15
    call subphl
    db 0x21,0xfb,0x15
    call sumser
    db 0x01,0x80,0x80,0x11,0x00,0x00
    call fpadd
    pop af
    call rscale
;1640
mulln2:
    db 0x01,0x31,0x80,0x11,0x18,0x72,0x21
mult:
    pop bc
    pop de
;1649
fpmult:
    call tstsgn
    db 0xc8,0x2e,0x00
    call addexp
    ld a,c
    db 0x32,0x06,0x21,0xeb,0x22,0x07,0x21,0x01,0x00,0x00,0x50,0x58,0x21
    db 0x5f,0x15,0xe5
    ld hl,mult8
    db 0xe5,0xe5
    db 0x21,0xf4,0x20
mult8:
    ld a,(hl)
    inc hl
    or a
    jp z,bytsft
    push hl
    ld l,8
mul8lp:
    rra
    ld h,a
    ld a,c
    jp nc,nomadd
    db 0xe5,0x2a,0x07,0x21,0x19,0xeb
    db 0xe1,0x3a,0x06,0x21,0x89
nomadd:
    rra
    ld c,a
    ld a,d
    rra
    ld d,a
    ld a,e
    rra
    ld e,a
    db 0x78,0x1f,0x47
    db 0x2d,0x7c,0xc2,0x74,0x16,0xe1
    ret
bytsft:
    ld b,e
    ld e,d
    ld d,c
    ld c,a
    ret
;169c
div10:
    call stakfp
    ld bc,0x8420
    db 0x11,0x00,0x00
    call fpbcde
div:
    pop bc
    pop de
;16aa
dvbcde:
    call tstsgn
    db 0xca,0xb0,0x04
    db 0x2e,0xff
    call addexp
    db 0x34,0x34,0x2b,0x7e,0x32,0x22,0x20,0x2b,0x7e,0x32,0x1e
    db 0x20,0x2b,0x7e,0x32,0x1a,0x20,0x41,0xeb,0xaf,0x4f,0x57,0x5f,0x32,0x25,0x20
divlp:
    db 0xe5
    db 0xc5,0x7d
    call 0x2019
    sbc a,0
    ccf
    jp nc,resdiv
    db 0x32,0x25,0x20,0xf1,0xf1
    db 0x37,0xd2
resdiv:
    pop bc
    pop hl
    ld a,c
    inc a
    dec a
    rra
    db 0xfa,0x95,0x15
    rla
    ld a,e
    rla
    ld e,a
    ld a,d
    rla
    ld d,a
    ld a,c
    rla
    ld c,a
    add hl,hl
    ld a,b
    rla
    db 0x47,0x3a,0x25,0x20,0x17,0x32,0x25,0x20
    db 0x79,0xb2,0xb3,0xc2,0xcf,0x16,0xe5,0x21,0xf7,0x20,0x35,0xe1,0xc2,0xcf,0x16,0xc3
    db 0xbc,0x04
;1712
addexp:
    ld a,b
    or a
    db 0xca,0x36,0x17,0x7d,0x21,0xf7,0x20,0xae,0x80,0x47,0x1f,0xa8
    db 0x78,0xf2,0x35,0x17,0xc6,0x80,0x77,0xca,0x95,0x16
    call signs
    db 0x77,0x2b,0xc9
ovtst1:
    call tstsgn
    cpl
    pop hl
ovtst2:
    or a
ovtst3:
    pop hl
    db 0xf2,0x74,0x15,0xc3,0xbc,0x04
;173d
mlsp10:
    call bcdefp
    ld a,b
    or a
    ret z
    db 0xc6,0x02,0xda,0xbc,0x04,0x47
    call fpadd
    db 0x21,0xf7,0x20,0x34
    db 0xc0,0xc3,0xbc,0x04
;1754:
tstsgn:
    db 0x3a,0xf7,0x20,0xb7,0xc8,0x3a,0xf6,0x20,0xfe
retrel:
    cpl
    rla
flgdif:
    sbc a,a
    ret nz
    inc a
    ret
sgn:
    call tstsgn
;1766
flgrel:
    ld b,0x88
    ld de,0
;176b
retint:
    db 0x21,0xf7,0x20,0x4f,0x70
    db 0x06,0x00,0x23,0x36,0x80,0x17,0xc3,0x5c,0x15
;1779:
abs:
    call tstsgn
    ret p
;177d
invsgn:
    db 0x21,0xf6,0x20
    db 0x7e,0xee,0x80,0x77,0xc9
;1785
stakfp:
    db 0xeb,0x2a,0xf4,0x20,0xe3,0xe5,0x2a,0xf6,0x20,0xe3,0xe5
    db 0xeb,0xc9
;1792
phltfp:
    call loadfp
;1795
fpbcde:
    ex de,hl
    ld (0x20f4),hl
    db 0x60,0x69,0x22,0xf6,0x20,0xeb,0xc9
;17a0
bcdefp:
    db 0x21,0xf4,0x20
;17a3
loadfp:
    db 0x5e,0x23,0x56,0x23,0x4e,0x23,0x46,0x23,0xc9
;17ac
fpthl:
    db 0x11,0xf4,0x20
;17af
dethl4:
    db 0x06
    db 0x04,0x1a,0x77,0x13,0x23,0x05,0xc2,0xb1,0x17,0xc9
;17ba
signs:
    db 0x21,0xf6,0x20,0x7e,0x07,0x37
    db 0x1f,0x77,0x3f,0x1f,0x23,0x23,0x77,0x79,0x07,0x37,0x1f,0x4f,0x1f,0xae,0xc9
;17cf
cmpnum:
    ld a,b
    or a
    db 0xca,0x54,0x17,0x21,0x5d,0x17,0xe5
    call tstsgn
    db 0x79,0xc8,0x21,0xf6,0x20
    db 0xae,0x79,0xf8
    call cmpfp
    db 0x1f,0xa9,0xc9
;17e9
cmpfp:
    db 0x23,0x78,0xbe,0xc0,0x2b,0x79,0xbe
    db 0xc0,0x2b,0x7a,0xbe,0xc0,0x2b,0x7b,0x96,0xc0
    pop hl
    pop hl
    ret
;17fc
fpint:
    db 0x47,0x4f,0x57,0x5f
    db 0xb7,0xc8,0xe5
    call bcdefp
    call signs
    xor (hl)
    ld h,a
    db 0xfc,0x20,0x18,0x3e,0x98
    db 0x90
    call scale
    db 0x7c,0x17,0xdc,0xa6,0x15,0x06,0x00,0xdc,0xbf,0x15,0xe1,0xc9
    db 0x1b,0x7a,0xa3,0x3c,0xc0,0x0b,0xc9
;1827
int:
    db 0x21,0xf7,0x20,0x7e,0xfe,0x98,0x3a,0xf4,0x20
    db 0xd0,0x7e
    call fpint
    db 0x36,0x98,0x7b,0xf5,0x79,0x17
    call conpos
    pop af
    ret
;1840
mldebc:
    db 0x21,0x00,0x00,0x78,0xb1,0xc8,0x3e,0x10,0x29,0xda,0x80,0x10,0xeb,0x29,0xeb,0xd2
    db 0x56,0x18,0x09,0xda,0x80,0x10,0x3d,0xc2,0x48,0x18
    ret
;185b
asctfp:
    db 0xfe,0x2d,0xf5,0xca,0x67
    db 0x18,0xfe,0x2b
    jp z,cnvnum
    dec hl
cnvnum:
    call reszer
    db 0x47,0x57,0x5f,0x2f,0x4f
manlp:
    call getchr
    db 0xda,0xb8,0x18,0xfe,0x2e,0xca,0x93,0x18,0xfe,0x45,0xc2,0x97,0x18
    call getchr
    call sgnexp
explp:
    call getchr
    db 0xda,0xda,0x18,0x14,0xc2,0x97,0x18
    xor a
    sub e
    ld e,a
    inc c
dpoint:
    inc c
    jp z,manlp
conexp:
    push hl
    ld a,e
    sub b
scalmi:
    db 0xf4,0xb0,0x18
    db 0xf2,0xa6,0x18
    db 0xf5
    call div10
    pop af
    inc a
endcon:
    db 0xc2,0x9a,0x18,0xd1,0xf1,0xcc,0x7d,0x17,0xeb,0xc9
scalpl:
    ret z
;18b1
multen:
    push af
    call mlsp10
    pop af
    dec a
    ret
addig:
    db 0xd5,0x57,0x78,0x89,0x47,0xc5,0xe5,0xd5
    call mlsp10
    db 0xf1,0xd6,0x30
    call rscale
    db 0xe1,0xc1,0xd1,0xc3,0x6f,0x18
;18cf
rscale:
    call stakfp
    call flgrel
padd:
    pop bc
    pop de
    db 0xc3,0x0e,0x15,0x7b,0x07,0x07,0x83,0x07,0x86
    db 0xd6,0x30,0x5f,0xc3,0x85,0x18,0xe5,0x21,0x45,0x04
    call prs
    pop hl
;18ee
prnthl:
    ex de,hl
    xor a
    db 0x06,0x98
    call retint
    ld hl,0x124a
    push hl
;18f9
numasc:
    db 0x21,0xf9,0x20
    push hl
    call tstsgn
    ld (hl),0x20
    db 0xf2,0x07,0x19,0x36,0x2d,0x23,0x36,0x30,0xca,0xbd,0x19,0xe5,0xfc,0x7d
    db 0x17
    xor a
    push af
    call rngtst
sixdig:
    db 0x01,0x43,0x91,0x11,0xf8,0x4f
    call cmpnum
    db 0xb7
    db 0xe2,0x34,0x19
    pop af
    call multen
    push af
    jp sixdig
gtsixd:
    call div10
    pop af
    inc a
    push af
    call rngtst
inrng:
    call round
    inc a
    call fpint
    call fpbcde
    db 0x01,0x06
    db 0x03,0xf1,0x81,0x3c,0xfa,0x50,0x19,0xfe,0x08,0xd2,0x50,0x19,0x3c,0x47,0x3e,0x02
    db 0x3d,0x3d,0xe1,0xf5,0x11,0xd6,0x19,0x05,0xc2,0x61,0x19,0x36,0x2e,0x23,0x36,0x30
    db 0x23,0x05,0x36,0x2e,0xcc,0xaa,0x17,0xc5,0xe5,0xd5
    call bcdefp
    db 0xe1,0x06,0x2f
    db 0x04,0x7b,0x96,0x5f,0x23,0x7a,0x9e,0x57,0x23,0x79,0x9e,0x4f,0x2b,0x2b,0xd2,0x70
    db 0x19
    call plucde
    inc hl
    call fpbcde
    db 0xeb,0xe1,0x70,0x23,0xc1,0x0d,0xc2,0x61
    db 0x19,0x05,0xca,0xa1,0x19,0x2b,0x7e,0xfe,0x30,0xca,0x95,0x19,0xfe,0x2e,0xc4,0xaa
    db 0x17,0xf1,0xca,0xc0,0x19,0x36,0x45,0x23,0x36,0x2b,0xf2,0xb1,0x19,0x36,0x2d,0x2f
    db 0x3c,0x06,0x2f,0x04,0xd6,0x0a,0xd2,0xb3,0x19,0xc6,0x3a,0x23,0x70,0x23,0x77,0x23
    db 0x71,0xe1,0xc9
;19c3
rngtst:
    db 0x01,0x74,0x94,0x11,0xf7,0x23
    call cmpnum
    db 0xb7,0xe1,0xe2,0x2b
    db 0x19,0xe9,0x00,0x00,0x00,0x80
powers:
    db 0xa0,0x86,0x01,0x10,0x27,0x00,0xe8,0x03,0x00,0x64
    db 0x00,0x00,0x0a,0x00,0x00,0x01,0x00,0x00,0x21,0x7d,0x17,0xe3,0xe9
;19ed
sqr:
    call stakfp
    ld hl,0x19d2
    call phltfp
power:
    pop bc
    pop de
    call tstsgn
    ld a,b
    jp z,exp
    jp p,power1
    or a
    db 0xca,0xb0,0x04
power1:
    db 0xb7,0xca,0x75,0x15,0xd5,0xc5,0x79,0xf6,0x7f
    call bcdefp
    db 0xf2,0x23,0x1a,0xd5,0xc5
    call int
    db 0xc1,0xd1,0xf5
    call cmpnum
    db 0xe1,0x7c,0x1f,0xe1,0x22,0xf6,0x20,0xe1,0x22,0xf4,0x20,0xdc,0xe8,0x19,0xcc,0x7d
    db 0x17,0xd5,0xc5
    call log
    pop bc
    pop de
    call fpmult
;1a3b
exp:
    call stakfp
    ld bc,0x8138
    ld de,0xaa3b
    call fpmult
    db 0x3a,0xf7,0x20,0xfe,0x88,0xd2,0x30,0x17
    call int
    db 0xc6,0x80,0xc6,0x02,0xda,0x30,0x17,0xf5,0x21,0xf7,0x15
    call addphl
    call mulln2
    db 0xf1,0xc1,0xd1,0xf5
    call subcde
    call invsgn
    db 0x21,0x7b,0x1a
    call smser1
    db 0x11,0x00,0x00,0xc1,0x4a,0xc3,0x49,0x16

    db 0x08,0x40,0x2e,0x94,0x74
    db 0x70,0x4f,0x2e,0x77,0x6e,0x02,0x88,0x7a,0xe6,0xa0,0x2a,0x7c,0x50,0xaa,0xaa,0x7e
    db 0xff,0xff,0x7f,0x7f,0x00,0x00,0x80,0x81,0x00,0x00,0x00,0x81
;1a9c
sumser:
    call stakfp
    db 0x11
    db 0x47,0x16,0xd5,0xe5
    call bcdefp
    call fpmult
    pop hl
;1aab
smser1:
    call stakfp
    db 0x7e,0x23
    call phltfp
    db 0x06
sumlp:
    pop af
    pop bc
    pop de
    dec a
    ret z
    push de
    push bc
    push af
    push hl
    call fpmult
    pop hl
    call loadfp
    push hl
    call fpadd
    pop hl
    jp sumlp
;1acc
rnd:
    call tstsgn
    db 0x21
    db 0x29,0x20,0xfa,0x2d,0x1b,0x21,0x4a,0x20
    call phltfp
    db 0x21,0x29,0x20,0xc8,0x86
    db 0xe6,0x07,0x06,0x00,0x77,0x23,0x87,0x87,0x4f,0x09
    call loadfp
    call fpmult
    db 0x3a,0x28,0x20,0x3c,0xe6,0x03,0x06,0x00,0xfe,0x01,0x88,0x32,0x28,0x20,0x21,0x31
    db 0x1b,0x87,0x87,0x4f,0x09
    call addphl
    call bcdefp
    db 0x7b,0x59,0xee,0x4f,0x4f
    db 0x36,0x80,0x2b,0x46,0x36,0x80,0x21,0x27,0x20,0x34,0x7e,0xd6,0xab,0xc2,0x24,0x1b
    db 0x77,0x0c,0x15,0x1c
    call bnorm
    db 0x21,0x4a,0x20,0xc3,0xac,0x17,0x77,0x2b,0x77
    db 0x2b,0x77,0xc3,0x08,0x1b

    db 0x68,0xb1,0x46,0x68
    db 0x99,0xe9,0x92,0x69
    db 0x10,0xd1,0x75,0x68

;1b41:
cos:
    ld hl,0x1b8b
    call addphl
;1b47:
sin:
    call stakfp
    ld bc,0x8349
    ld de,0x0fdb
    call fpbcde
    pop bc
    pop de
    call dvbcde
    call stakfp
    call int
    pop bc
    pop de
    call subcde
    db 0x21,0x8f,0x1b
    call subphl
    call tstsgn
    scf
    jp p,sin1
    call round
    call tstsgn
    or a
sin1:
    push af
    call p,invsgn
    db 0x21,0x8f,0x1b
    call addphl
    pop af
    call nc,invsgn
    db 0x21,0x93,0x1b,0xc3,0x9c,0x1a,0xdb,0x0f,0x49,0x81,0x00
    db 0x00,0x00,0x7f,0x05,0xba,0xd7,0x1e,0x86,0x64,0x26,0x99,0x87,0x58,0x34,0x23,0x87
    db 0xe0,0x5d,0xa5,0x86,0xda,0x0f,0x49,0x83
;1ba8
tan:
    call stakfp
    call sin
    pop bc
    pop hl
    call stakfp
    ex de,hl
    call fpbcde
    call cos
    jp div
;1bbd
atn:
    call tstsgn
    db 0xfc,0xe8,0x19,0xfc,0x7d,0x17,0x3a,0xf7,0x20,0xfe,0x81,0xda,0xda,0x1b,0x01,0x00
    db 0x81,0x51,0x59
    call dvbcde
    db 0x21,0x05,0x15,0xe5,0x21,0xe4,0x1b
    call sumser
    db 0x21,0x8b,0x1b
    ret
    db 0x09,0x4a,0xd7,0x3b,0x78,0x02,0x6e,0x84,0x7b,0xfe,0xc1,0x2f
    db 0x7c,0x74,0x31,0x9a,0x7d,0x84,0x3d,0x5a,0x7d,0xc8,0x7f,0x91,0x7e,0xe4,0xbb,0x4c
    db 0x7e,0x6c,0xaa,0xaa,0x7f,0x00,0x00,0x00,0x81
;aret:
    ret
;1c0a:
getinp:
    rst 0x10
    ret
;1c0c:
cls:
    db 0x3e,0x0c,0xc3,0x46
    db 0x1d
;1c11:
width:
    call getint
    ld a,e
    ld (0x2052),a
    ret
;1c19
lines:
    call getnum
    call deint
    db 0xed
    db 0x53,0x56,0x20,0xed,0x53,0x58,0x20
    ret
;1c28
deek:
    call deint
    push de
    pop hl
    ld b,(hl)
    inc hl
    ld a,(hl)
    db 0xc3,0x2d,0x11
;1c33
doke:
    call getnum
    call deint
    push de
    call chksyn
    db 0x2c
    call getnum
    call deint
    ex (sp),hl
    ld (hl),e
    inc hl
    ld (hl),d
    pop hl
    ret
;1c4a
hex:
    call tstnum
    call deint
    push bc
    db 0x21,0xf9,0x20,0x7a,0xfe,0x00,0x28,0x0c
    call byt2asc
    db 0x78,0xfe,0x30,0x28
    db 0x02,0x70,0x23,0x71,0x23
hex2:
    db 0x7b
    call byt2asc
    db 0x7a,0xfe,0x00,0x20,0x05,0x78,0xfe
    db 0x30,0x28,0x02,0x70,0x23,0x71,0x23
    xor a
    ld (hl),a
    inc hl
    ld (hl),a
    pop bc
    db 0x21,0xf9,0x20,0xc3
    db 0xdb,0x11
;1c82
byt2asc:
    db 0x47,0xe6,0x0f
    cp 10
    jr c,add30
    db 0xc6,0x07
add30:
    add a,0x30
    ld c,a
    ld a,b
    rrca
    rrca
    rrca
    rrca
    db 0xe6,0x0f,0xfe,0x0a,0x38,0x02,0xc6,0x07,0xc6,0x30,0x47,0xc9
;1c9f
hextfp:
    db 0xeb
    db 0x21,0x00,0x00
    call gethex
    db 0xda,0xd8,0x1c,0x18,0x05
hexlp:
    call gethex
    db 0x38,0x1f
hexlp1:
    add hl,hl
    add hl,hl
    add hl,hl
    add hl,hl
    or l
    ld l,a
    jr hexlp
;1cb8:
gethex:
    inc de
    ld a,(de)
    cp 0x20
    jp z,gethex
    sub 0x30
    db 0xd8
    db 0xfe,0x0a
    db 0x38,0x05,0xd6,0x07,0xfe,0x0a,0xd8
nosub7:
    db 0xfe,0x10,0x3f,0xc9
hexit:
    ex de,hl
    ld a,d
    ld c,e
    db 0xe5
    call acpass
    pop hl
    ret
hxerr:
    db 0x1e,0x26,0xc3,0xc1,0x04
;1cdd:
bin:
    call tstnum
    call deint
bin2:
    db 0xc5,0x21,0xf9,0x20,0x06,0x11
zerosup:
    dec b
    ld a,b
    cp 1
    jr z,bitout
    rl e
    rl d
    jr nc,zerosup
    jr bitout2
bitout:
    rl e
    rl d
bitout2:
    db 0x3e,0x30,0xce,0x00,0x77
    db 0x23,0x05,0x20,0xf3
    xor a
    ld (hl),a
    inc hl
    ld (hl),a
    db 0xc1,0x21,0xf9,0x20,0xc3,0xdb,0x11
;1d0f
bintfp:
    ex de,hl
    ld hl,0
    call chkbin
    db 0xda,0x3a,0x1d,0xd6,0x30,0x29,0xb5,0x6f
    call chkbin
    db 0x30,0xf6,0xeb,0x7a,0x4b,0xe5
    call acpass
    pop hl
    ret
;1d2c
chkbin:
    inc de
    ld a,(de)
    cp 0x20
    db 0xca,0x2c,0x1d,0xfe,0x30,0xd8,0xfe,0x32,0x3f,0xc9,0x1e,0x28,0xc3,0xc1,0x04,0xdd
    db 0x21,0xff,0xff,0xc3,0x11,0x01
;1d46:
monout:
    db 0xc3,0x08,0x00
;1d49
monitr:
    db 0xc3,0x00,0x00,0x3e,0x00,0x32,0x5d
    db 0x20,0xc3,0x18,0x01
    retn
tstbit:
    push af
    and b
    pop bc
    cp b
    ld a,0
    ret
;1d5d
outncr:
    call outc
    jp printcrlf

